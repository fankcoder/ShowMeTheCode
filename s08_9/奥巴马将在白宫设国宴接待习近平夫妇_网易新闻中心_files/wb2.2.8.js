(function(y){var Z=y;var B={timeOut:6000,tips:{ajaxRequestError:"抱歉，请求执行出错！",ajaxOnError:"请求出错！",ajaxOnTimeOut:"请求超时！"},_cookie:{global:".163.com",sInfo:"S_INFO",pInfo:"P_INFO",nickname:"NTES_REPLY_NICKNAME"},showNameMaxLen:12,login:{regular:{userName:/^\w+([\-\+\.]*\w+)*@\w+([\-\.]\w+)*\.\w+([\-\.]\w+)*$/},url:{checkUserName:"http://t.163.com/account/passport/check"},tips:{userNameEmpty:"请输入你的网易通行证",userNameFormatError:"请输入正确的通行证，如abc@163.com",passwordEmpty:"密码不能为空"}},reg:{url:/(http)s?:\/\/(?:[\w-]+\.?)+[\.\/\?%&=#@\[\]\-+_!:*~\w-]+|(www)\.(?:[\w-]+\.?)+[\.\/\?%&=#@\[\]\-+_!:*~\w-]+/gi,keyword:/([#＃])([\u4e00-\u9fa5a-zA-Z0-9+|]{1,20})/g,user:/([@＠])([\u4e00-\u9fa5a-zA-Z0-9]{1,24})/g,reTplValues:/<#=(\w+)#>/g,showNameReg:/^[\u4e00-\u9fa5a-zA-Z0-9]+$/},url:{wbarticleCommon:"http://t.163.com/share/tweet",wbarticleCheckNickName:"http://t.163.com/share/check/nickname",wbarticleOpenAccount:"http://t.163.com/share/open/account",wbarticleFolow:"http://t.163.com/share/follow",wbarticleCheckStatus:"http://t.163.com/share/check/status",wbarticleRegister:"http://reg.163.com/reg/reg.jsp?product=t&url=http://t.163.com/&loginurl=http://t.163.com",wbarticleShare:"http://api.t.163.com/inshare",wbarticleLogin1:"http://reg.163.com/services/httpLoginExchgKeyNew",wbarticleLogin2:"http://reg.163.com/httpLoginVerifyNew.jsp",wbarticleStarList:"http://static.t.126.net/share/recommend/<#=channelId#>/article.js",wbarticleNewsList:"http://static.t.126.net/share/recommend/<#=channelId#>/articleLink.js",wbarticleRecoList:"http://static.t.126.net/share/recommend/<#=channelId#>/articleTweet.js",wbarticleOimage:"http://oimageb7.ydstatic.com/image?w=<#=width#>&h=<#=height#>&url=<#=url#>",auditlink:"http://t.163.com/page.do"},currentWindow:"",shade:"",email:""};var l={};l.commonPopWindow='<table class="wb-article-newdialogLayer-table">      <tbody>         <tr>            <td class="wb-article-newdialogLayer-top-left"></td>            <td class="wb-article-newdialogLayer-top-center"></td>            <td class="wb-article-newdialogLayer-top-right"></td>         </tr>         <tr>            <td class="wb-article-newdialogLayer-middle-left"></td>            <td class="wb-article-newdialogLayer-middle-center">               <div class="wb-article-newdialogLayer-content">                  <div class="wb-article-newdialogLayer-bd">                     <div class="wb-article-newdialogLayer-title wb-article-dragBar">                        <div class="wb-article-newtitle-icon">                           <em></em><#=title#>                        </div>                        <div class="wb-article-newclose-wraper wb-article-common-close">                           <a title="关闭" href="javascript:;" class="wb-article-newclose-icon wb-article-newdialogLayer-close "></a>                        </div>                     </div>                     <#=content#>                  </div>               </div>            </td>            <td class="wb-article-newdialogLayer-middle-right"></td>         </tr>         <tr>            <td class="wb-article-newdialogLayer-bottom-left"></td>            <td class="wb-article-newdialogLayer-bottom-center"></td>            <td class="wb-article-newdialogLayer-bottom-right"></td>         </tr>      </tbody>   </table>';l.loginForm='<div class="wb-article-popWindow-formWraper" style="width:<#=width#>px;">\u000a<div class="wb-article-popWindowhd"></div>\u000a    <div class="wb-article-popLoginSideColumn" style="width:<#=sideWidth#>px;">\u000a        <a class="wb-article-popLoginBg wb-article-popLoginRegBtn" id="<#=registerBtnNodeId#>" href="#" target="_blank"></a>\u000a    </div>\u000a    <div class="wb-article-popLoginContent" style="width:<#=formWidth#>px;">\u000a        <div class="wb-article-popLoginArea">\u000a              <table>\u000a                <tbody>\u000a                    <tr>\u000a                        <td>\u000a                            <label for="<#=userNameNodeId#>" class="wb-article-popLoginLb">\u000a                                帐号：</label>\u000a                        </td>\u000a                        <td>\u000a  <div class="wb-article-input-wraper"><input type="text" autocomplete="off" class="wb-article-popLogin-inputField" name="<#=userNameNodeId#>" value="<#=email#>" id="<#=userNameNodeId#>">\u000a <input class="wb-article-login-area-hint" type="input" id="wb-article-login-area-hint" value="如 name@example.com" /></div></td>\u000a                        <td>\u000a                        </td>\u000a                    </tr>\u000a                    <tr>\u000a                        <td>\u000a                            <label class="wb-article-popLoginLb" for="<#=passwordNodeId#>">\u000a                                密码：</label>\u000a                        </td>\u000a                        <td>\u000a                            <input type="password" class="wb-article-popLogin-inputField" name="<#=passwordNodeId#>" id="<#=passwordNodeId#>">\u000a                        </td>\u000a                        <td>\u000a                        </td>\u000a                    </tr>\u000a                    <tr>\u000a                        <td>\u000a                        </td>\u000a                        <td>\u000a   <span  class="wb-article-popLogin-remmber-chk" id="wb-article-popLogin-remmber-chk" >   <input type="checkbox"  name="<#=saveLoginNodeId#>" id="<#=saveLoginNodeId#>">下次自动登录<div class="wb-article-login-tiparea wb-article-autologin-tiparea" id="wb-article-autologin_tiparea">\u000a    <div class="wb-article-login-tiparea-top wb-article-arrowup-red">\u000a    </div>\u000a    <a title="关闭" onclick="$(\'#wb-article-autologin_tiparea\').addCss(\'visibility:hidden\')" href="javascript:;"\u000a        class="wb-article-login-tiparea-close"></a>\u000a    <p>\u000a        为了您的信息安全，请不要在网吧或公用电脑上使用此功能！</p>\u000a</div></span> <a class="wb-article-popLogin-remmber"\u000a                                target="_blank" href="http://reg.163.com/RecoverPasswd1.shtml">忘记密码?</a>\u000a                        </td>\u000a                        <td>\u000a                        </td>\u000a                    </tr>\u000a                    <tr>\u000a                        <td>\u000a                        </td>\u000a                        <td>\u000a                            <a class="wb-article-btnbg wb-article-commonbtn" target="_self" id="<#=btnNodeId#>" href="javascript:;"><em class="wb-article-btnbg">\u000a                                <#=btnText#> </em></a><span class="wb-article-popLogin-error" id="<#=errorNodeId#>"></span><span id="<#=proccessingNodeId#>"></span>\u000a                        </td>\u000a                        <td>\u000a                        </td>\u000a                    </tr>\u000a                </tbody>\u000a            </table>\u000a        </div>\u000a    </div>\u000a    <div class="wb-article-popWindowft"></div>\u000a</div>';l.openForm='<div class="wb-article-popWindow-formWraper" style="width:<#=width#>px;">\u000a<div class="wb-article-popWindowhd"></div>\u000a    <div class="wb-article-popLoginContent" style="width:auto;border-width:0;">\u000a        <div class="wb-article-popLoginArea">\u000a               <table>\u000a                <tbody>\u000a                    <tr>\u000a                        <td colspan="3">\u000a                            <div class="wb-article-popLogin-reminder">\u000a                                <span>检测到您已经登录网易通行证：</span><em><#=email#></em><a href="javascript:;" target="_self" style="color:#1E50A2" id="<#=changeAccountNodeId#>"> 换个帐号？</a>\u000a                            </div>\u000a                        </td>\u000a                    </tr>\u000a                                        <tr>\u000a                        <td colspan="3">\u000a                            <div class="wb-article-popLogin-reminder">\u000a                                <span>给自己起个昵称，快速开通微博</span>\u000a                            </div>\u000a                        </td>\u000a                    </tr>\u000a                    <tr>\u000a                        <td>\u000a                            <label for="<#=userNameNodeId#>" class="wb-article-popLoginLb">\u000a                                昵 称：</label>\u000a                        </td>\u000a                        <td>\u000a                            <input type="text" class="wb-article-popLogin-inputField" name="<#=userNameNodeId#>" id="<#=userNameNodeId#>"><span style="color:#999"> 可以包含汉字、字母和数字，限制12个汉字<span>\u000a                        </td>\u000a                    </tr>\u000a                    <tr>\u000a                        <td>\u000a                        </td>\u000a                        <td>\u000a                            <a class="wb-article-btnbg wb-article-commonbtn" target="_self" id="<#=btnNodeId#>" href="javascript:;"><em class="wb-article-btnbg">\u000a                                <#=btnText#> </em></a><span class="wb-article-popLogin-error" id="<#=errorNodeId#>"></span><span id="<#=proccessingNodeId#>"></span>\u000a                        </td>\u000a                        <td>\u000a                        </td>\u000a                    </tr>\u000a                </tbody>\u000a            </table>\u000a        </div>\u000a    </div>\u000a    <div class="wb-article-popWindowft"></div>\u000a</div>';l.sendBoxWin='<div style="width:<#=width#>px;background-color:#fff;overflow:hidden;margin:5px 0" >\u000a            <div class="wb-article-item">\u000a              <textarea class="wb-article-popup-textarea" style="width:<#=boxWidth#>px;"></textarea>\u000a            </div>\u000a            <div class="wb-article-fr wb-article-clearfix">\u000a              <span class="send-info-tips hidden" ></span>\u000a              <span  class="wb-article-popup-note">\u000a                还可输<span  class="wb-article-char-constantia">163</span>字\u000a              </span>\u000a              <a title="按Ctrl+Enter键发微博" onclick="this.blur();" href="javascript:;" target="_self" class="wb-article-popup-sendinfo-btn" >\u000a                <em> <#=btnText#></em>\u000a              </a>\u000a            </div>\u000a </div>';l.sendInfoTip='<#=note#><span class="wb-article-char-constantia" style="color:<#=color#>"><#=countnum#></span> 字';(function(){var bi="0123456789abcdef";function bx(b3){str="";for(j=0;j<=3;j++){str+=bi.charAt((b3>>(j*8+4))&15)+bi.charAt((b3>>(j*8))&15)}return str}function a4(b3){nblk=((b3.length+8)>>6)+1;blks=new Array(nblk*16);for(i=0;i<nblk*16;i++){blks[i]=0}for(i=0;i<b3.length;i++){blks[i>>2]|=b3.charCodeAt(i)<<((i%4)*8)}blks[i>>2]|=128<<((i%4)*8);blks[nblk*16-2]=b3.length*8;return blks}function aU(b3,b6){var b5=(b3&65535)+(b6&65535);var b4=(b3>>16)+(b6>>16)+(b5>>16);return(b4<<16)|(b5&65535)}function bJ(b3,b4){return(b3<<b4)|(b3>>>(32-b4))}function br(b8,b5,b4,b3,b7,b6){return aU(bJ(aU(aU(b5,b8),aU(b3,b6)),b7),b4)}function bT(b5,b4,b9,b8,b3,b7,b6){return br((b4&b9)|((~b4)&b8),b5,b4,b3,b7,b6)}function bB(b5,b4,b9,b8,b3,b7,b6){return br((b4&b8)|(b9&(~b8)),b5,b4,b3,b7,b6)}function bm(b5,b4,b9,b8,b3,b7,b6){return br(b4^b9^b8,b5,b4,b3,b7,b6)}function bd(b5,b4,b9,b8,b3,b7,b6){return br(b9^(b4|(~b8)),b5,b4,b3,b7,b6)}function bW(b3){x=a4(b3);a=1732584193;b=-271733879;c=-1732584194;d=271733878;for(i=0;i<x.length;i+=16){olda=a;oldb=b;oldc=c;oldd=d;a=bT(a,b,c,d,x[i+0],7,-680876936);d=bT(d,a,b,c,x[i+1],12,-389564586);c=bT(c,d,a,b,x[i+2],17,606105819);b=bT(b,c,d,a,x[i+3],22,-1044525330);a=bT(a,b,c,d,x[i+4],7,-176418897);d=bT(d,a,b,c,x[i+5],12,1200080426);c=bT(c,d,a,b,x[i+6],17,-1473231341);b=bT(b,c,d,a,x[i+7],22,-45705983);a=bT(a,b,c,d,x[i+8],7,1770035416);d=bT(d,a,b,c,x[i+9],12,-1958414417);c=bT(c,d,a,b,x[i+10],17,-42063);b=bT(b,c,d,a,x[i+11],22,-1990404162);a=bT(a,b,c,d,x[i+12],7,1804603682);d=bT(d,a,b,c,x[i+13],12,-40341101);c=bT(c,d,a,b,x[i+14],17,-1502002290);b=bT(b,c,d,a,x[i+15],22,1236535329);a=bB(a,b,c,d,x[i+1],5,-165796510);d=bB(d,a,b,c,x[i+6],9,-1069501632);c=bB(c,d,a,b,x[i+11],14,643717713);b=bB(b,c,d,a,x[i+0],20,-373897302);a=bB(a,b,c,d,x[i+5],5,-701558691);d=bB(d,a,b,c,x[i+10],9,38016083);c=bB(c,d,a,b,x[i+15],14,-660478335);b=bB(b,c,d,a,x[i+4],20,-405537848);a=bB(a,b,c,d,x[i+9],5,568446438);d=bB(d,a,b,c,x[i+14],9,-1019803690);c=bB(c,d,a,b,x[i+3],14,-187363961);b=bB(b,c,d,a,x[i+8],20,1163531501);a=bB(a,b,c,d,x[i+13],5,-1444681467);d=bB(d,a,b,c,x[i+2],9,-51403784);c=bB(c,d,a,b,x[i+7],14,1735328473);b=bB(b,c,d,a,x[i+12],20,-1926607734);a=bm(a,b,c,d,x[i+5],4,-378558);d=bm(d,a,b,c,x[i+8],11,-2022574463);c=bm(c,d,a,b,x[i+11],16,1839030562);b=bm(b,c,d,a,x[i+14],23,-35309556);a=bm(a,b,c,d,x[i+1],4,-1530992060);d=bm(d,a,b,c,x[i+4],11,1272893353);c=bm(c,d,a,b,x[i+7],16,-155497632);b=bm(b,c,d,a,x[i+10],23,-1094730640);a=bm(a,b,c,d,x[i+13],4,681279174);d=bm(d,a,b,c,x[i+0],11,-358537222);c=bm(c,d,a,b,x[i+3],16,-722521979);b=bm(b,c,d,a,x[i+6],23,76029189);a=bm(a,b,c,d,x[i+9],4,-640364487);d=bm(d,a,b,c,x[i+12],11,-421815835);c=bm(c,d,a,b,x[i+15],16,530742520);b=bm(b,c,d,a,x[i+2],23,-995338651);a=bd(a,b,c,d,x[i+0],6,-198630844);d=bd(d,a,b,c,x[i+7],10,1126891415);c=bd(c,d,a,b,x[i+14],15,-1416354905);b=bd(b,c,d,a,x[i+5],21,-57434055);a=bd(a,b,c,d,x[i+12],6,1700485571);d=bd(d,a,b,c,x[i+3],10,-1894986606);c=bd(c,d,a,b,x[i+10],15,-1051523);b=bd(b,c,d,a,x[i+1],21,-2054922799);a=bd(a,b,c,d,x[i+8],6,1873313359);d=bd(d,a,b,c,x[i+15],10,-30611744);c=bd(c,d,a,b,x[i+6],15,-1560198380);b=bd(b,c,d,a,x[i+13],21,1309151649);a=bd(a,b,c,d,x[i+4],6,-145523070);d=bd(d,a,b,c,x[i+11],10,-1120210379);c=bd(c,d,a,b,x[i+2],15,718787259);b=bd(b,c,d,a,x[i+9],21,-343485551);a=aU(a,olda);b=aU(b,oldb);c=aU(c,oldc);d=aU(d,oldd)}return bx(a)+bx(b)+bx(c)+bx(d)}var bp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function bE(b9){var b5,b7,b3;var b8,b6,b4;b3=b9.length;b7=0;b5="";while(b7<b3){b8=b9.charCodeAt(b7++)&255;if(b7==b3){b5+=bp.charAt(b8>>2);b5+=bp.charAt((b8&3)<<4);b5+="==";break}b6=b9.charCodeAt(b7++);if(b7==b3){b5+=bp.charAt(b8>>2);b5+=bp.charAt(((b8&3)<<4)|((b6&240)>>4));b5+=bp.charAt((b6&15)<<2);b5+="=";break}b4=b9.charCodeAt(b7++);b5+=bp.charAt(b8>>2);b5+=bp.charAt(((b8&3)<<4)|((b6&240)>>4));b5+=bp.charAt(((b6&15)<<2)|((b4&192)>>6));b5+=bp.charAt(b4&63)}return b5}function aB(b6){var b4,b5,b3,b7;b4="";b3=b6.length;for(b5=0;b5<b3;b5++){b7=b6.charCodeAt(b5);if((b7>=1)&&(b7<=127)){b4+=b6.charAt(b5)}else{if(b7>2047){b4+=String.fromCharCode(224|((b7>>12)&15));b4+=String.fromCharCode(128|((b7>>6)&63));b4+=String.fromCharCode(128|((b7>>0)&63))}else{b4+=String.fromCharCode(192|((b7>>6)&31));b4+=String.fromCharCode(128|((b7>>0)&63))}}}return b4}function aU(b3,b4){return((b3&2147483647)+(b4&2147483647))^(b3&2147483648)^(b4&2147483648)}function aO(b4){var b5="0123456789abcdef";var b6="";for(var b3=7;b3>=0;b3--){b6+=b5.charAt((b4>>(b3*4))&15)}return b6}function bq(b5){var b3=((b5.length+8)>>6)+1,b6=new Array(b3*16);for(var b4=0;b4<b3*16;b4++){b6[b4]=0}for(b4=0;b4<b5.length;b4++){b6[b4>>2]|=b5.charCodeAt(b4)<<(24-(b4&3)*8)}b6[b4>>2]|=128<<(24-(b4&3)*8);b6[b3*16-1]=b5.length*8;return b6}function bJ(b3,b4){return(b3<<b4)|(b3>>>(32-b4))}function bI(b4,b3,b6,b5){if(b4<20){return(b3&b6)|((~b3)&b5)}if(b4<40){return b3^b6^b5}if(b4<60){return(b3&b6)|(b3&b5)|(b6&b5)}return b3^b6^b5}function aE(b3){return(b3<20)?1518500249:(b3<40)?1859775393:(b3<60)?-1894007588:-899497514}function aK(cg){var cf=bq(cg);var ch=new Array(80);var ce=1732584193;var cd=-271733879;var cc=-1732584194;var cb=271733878;var ca=-1009589776;for(var b7=0;b7<cf.length;b7+=16){var b9=ce;var b8=cd;var b6=cc;var b5=cb;var b3=ca;for(var b4=0;b4<80;b4++){if(b4<16){ch[b4]=cf[b7+b4]}else{ch[b4]=bJ(ch[b4-3]^ch[b4-8]^ch[b4-14]^ch[b4-16],1)}ba=aU(aU(bJ(ce,5),bI(b4,cd,cc,cb)),aU(aU(ca,ch[b4]),aE(b4)));ca=cb;cb=cc;cc=bJ(cd,30);cd=ce;ce=ba}ce=aU(ce,b9);cd=aU(cd,b8);cc=aU(cc,b6);cb=aU(cb,b5);ca=aU(ca,b3)}SHA1Value=aO(ce)+aO(cd)+aO(cc)+aO(cb)+aO(ca);return SHA1Value}window.getMd5=bW;window.SHA1=aK;window.BASE64=bE;window.utf16to8=aB;var bZ;var bK=244837814094590;var bw=((bK&16777215)==15715070);function bU(b4,b3,b5){if(b4!=null){if("number"==typeof b4){this.fromNumber(b4,b3,b5)}else{if(b3==null&&"string"!=typeof b4){this.fromString(b4,256)}else{this.fromString(b4,b3)}}}}function aH(){return new bU(null)}function az(b7,b3,b4,b6,b9,b8){while(--b8>=0){var b5=b3*this[b7++]+b4[b6]+b9;b9=Math.floor(b5/67108864);b4[b6++]=b5&67108863}return b9}function b1(b7,cc,cd,b6,ca,b3){var b9=cc&32767,cb=cc>>15;while(--b3>=0){var b5=this[b7]&32767;var b8=this[b7++]>>15;var b4=cb*b5+b8*b9;b5=b9*b5+((b4&32767)<<15)+cd[b6]+(ca&1073741823);ca=(b5>>>30)+(b4>>>15)+cb*b8+(ca>>>30);cd[b6++]=b5&1073741823}return ca}function b0(b7,cc,cd,b6,ca,b3){var b9=cc&16383,cb=cc>>14;while(--b3>=0){var b5=this[b7]&16383;var b8=this[b7++]>>14;var b4=cb*b5+b8*b9;b5=b9*b5+((b4&16383)<<14)+cd[b6]+ca;ca=(b5>>28)+(b4>>14)+cb*b8;cd[b6++]=b5&268435455}return ca}if(bw&&(navigator.appName=="Microsoft Internet Explorer")){bU.prototype.am=b1;bZ=30}else{if(bw&&(navigator.appName!="Netscape")){bU.prototype.am=az;bZ=26}else{bU.prototype.am=b0;bZ=28}}bU.prototype.DB=bZ;bU.prototype.DM=((1<<bZ)-1);bU.prototype.DV=(1<<bZ);var by=52;bU.prototype.FV=Math.pow(2,by);bU.prototype.F1=by-bZ;bU.prototype.F2=2*bZ-by;var bD="0123456789abcdefghijklmnopqrstuvwxyz";var bH=new Array();var bR,aX;bR="0".charCodeAt(0);for(aX=0;aX<=9;++aX){bH[bR++]=aX}bR="a".charCodeAt(0);for(aX=10;aX<36;++aX){bH[bR++]=aX}bR="A".charCodeAt(0);for(aX=10;aX<36;++aX){bH[bR++]=aX}function b2(b3){return bD.charAt(b3)}function a1(b4,b3){var b5=bH[b4.charCodeAt(b3)];return(b5==null)?-1:b5}function bv(b4){for(var b3=this.t-1;b3>=0;--b3){b4[b3]=this[b3]}b4.t=this.t;b4.s=this.s}function aP(b3){this.t=1;this.s=(b3<0)?-1:0;if(b3>0){this[0]=b3}else{if(b3<-1){this[0]=b3+DV}else{this.t=0}}}function aC(b3){var b4=aH();b4.fromInt(b3);return b4}function aY(b9,b4){var b6;if(b4==16){b6=4}else{if(b4==8){b6=3}else{if(b4==256){b6=8}else{if(b4==2){b6=1}else{if(b4==32){b6=5}else{if(b4==4){b6=2}else{this.fromRadix(b9,b4);return}}}}}}this.t=0;this.s=0;var b8=b9.length,b5=false,b7=0;while(--b8>=0){var b3=(b6==8)?b9[b8]&255:a1(b9,b8);if(b3<0){if(b9.charAt(b8)=="-"){b5=true}continue}b5=false;if(b7==0){this[this.t++]=b3}else{if(b7+b6>this.DB){this[this.t-1]|=(b3&((1<<(this.DB-b7))-1))<<b7;this[this.t++]=(b3>>(this.DB-b7))}else{this[this.t-1]|=b3<<b7}}b7+=b6;if(b7>=this.DB){b7-=this.DB}}if(b6==8&&(b9[0]&128)!=0){this.s=-1;if(b7>0){this[this.t-1]|=((1<<(this.DB-b7))-1)<<b7}}this.clamp();if(b5){bU.ZERO.subTo(this,this)}}function bh(){var b3=this.s&this.DM;while(this.t>0&&this[this.t-1]==b3){--this.t}}function aT(b4){if(this.s<0){return"-"+this.negate().toString(b4)}var b5;if(b4==16){b5=4}else{if(b4==8){b5=3}else{if(b4==2){b5=1}else{if(b4==32){b5=5}else{if(b4==4){b5=2}else{return this.toRadix(b4)}}}}}var b7=(1<<b5)-1,ca,b3=false,b8="",b6=this.t;var b9=this.DB-(b6*this.DB)%b5;if(b6-->0){if(b9<this.DB&&(ca=this[b6]>>b9)>0){b3=true;b8=b2(ca)}while(b6>=0){if(b9<b5){ca=(this[b6]&((1<<b9)-1))<<(b5-b9);ca|=this[--b6]>>(b9+=this.DB-b5)}else{ca=(this[b6]>>(b9-=b5))&b7;if(b9<=0){b9+=this.DB;--b6}}if(ca>0){b3=true}if(b3){b8+=b2(ca)}}}return b3?b8:"0"}function bl(){var b3=aH();bU.ZERO.subTo(this,b3);return b3}function bN(){return(this.s<0)?this.negate():this}function a8(b3){var b5=this.s-b3.s;if(b5!=0){return b5}var b4=this.t;b5=b4-b3.t;if(b5!=0){return(this.s<0)?-b5:b5}while(--b4>=0){if((b5=this[b4]-b3[b4])!=0){return b5}}return 0}function aJ(b3){var b5=1,b4;if((b4=b3>>>16)!=0){b3=b4;b5+=16}if((b4=b3>>8)!=0){b3=b4;b5+=8}if((b4=b3>>4)!=0){b3=b4;b5+=4}if((b4=b3>>2)!=0){b3=b4;b5+=2}if((b4=b3>>1)!=0){b3=b4;b5+=1}return b5}function aW(){if(this.t<=0){return 0}return this.DB*(this.t-1)+aJ(this[this.t-1]^(this.s&this.DM))}function bS(b5,b4){var b3;for(b3=this.t-1;b3>=0;--b3){b4[b3+b5]=this[b3]}for(b3=b5-1;b3>=0;--b3){b4[b3]=0}b4.t=this.t+b5;b4.s=this.s}function bu(b5,b4){for(var b3=b5;b3<this.t;++b3){b4[b3-b5]=this[b3]}b4.t=Math.max(this.t-b5,0);b4.s=this.s}function aV(ca,b6){var b4=ca%this.DB;var b3=this.DB-b4;var b8=(1<<b3)-1;var b7=Math.floor(ca/this.DB),b9=(this.s<<b4)&this.DM,b5;for(b5=this.t-1;b5>=0;--b5){b6[b5+b7+1]=(this[b5]>>b3)|b9;b9=(this[b5]&b8)<<b4}for(b5=b7-1;b5>=0;--b5){b6[b5]=0}b6[b7]=b9;b6.t=this.t+b7+1;b6.s=this.s;b6.clamp()}function aM(b9,b6){b6.s=this.s;var b7=Math.floor(b9/this.DB);if(b7>=this.t){b6.t=0;return}var b4=b9%this.DB;var b3=this.DB-b4;var b8=(1<<b4)-1;b6[0]=this[b7]>>b4;for(var b5=b7+1;b5<this.t;++b5){b6[b5-b7-1]|=(this[b5]&b8)<<b3;b6[b5-b7]=this[b5]>>b4}if(b4>0){b6[this.t-b7-1]|=(this.s&b8)<<b3}b6.t=this.t-b7;b6.clamp()}function bz(b4,b6){var b5=0,b7=0,b3=Math.min(b4.t,this.t);while(b5<b3){b7+=this[b5]-b4[b5];b6[b5++]=b7&this.DM;b7>>=this.DB}if(b4.t<this.t){b7-=b4.s;while(b5<this.t){b7+=this[b5];b6[b5++]=b7&this.DM;b7>>=this.DB}b7+=this.s}else{b7+=this.s;while(b5<b4.t){b7-=b4[b5];b6[b5++]=b7&this.DM;b7>>=this.DB}b7-=b4.s}b6.s=(b7<0)?-1:0;if(b7<-1){b6[b5++]=this.DV+b7}else{if(b7>0){b6[b5++]=b7}}b6.t=b5;b6.clamp()}function a5(b4,b6){var b3=this.abs(),b7=b4.abs();var b5=b3.t;b6.t=b5+b7.t;while(--b5>=0){b6[b5]=0}for(b5=0;b5<b7.t;++b5){b6[b5+b3.t]=b3.am(0,b7[b5],b6,b5,0,b3.t)}b6.s=0;b6.clamp();if(this.s!=b4.s){bU.ZERO.subTo(b6,b6)}}function bk(b5){var b3=this.abs();var b4=b5.t=2*b3.t;while(--b4>=0){b5[b4]=0}for(b4=0;b4<b3.t-1;++b4){var b6=b3.am(b4,b3[b4],b5,2*b4,0,1);if((b5[b4+b3.t]+=b3.am(b4+1,2*b3[b4],b5,2*b4+1,b6,b3.t-b4-1))>=b3.DV){b5[b4+b3.t]-=b3.DV;b5[b4+b3.t+1]=1}}if(b5.t>0){b5[b5.t-1]+=b3.am(b4,b3[b4],b5,2*b4,0,1)}b5.s=0;b5.clamp()}function a6(cc,b9,b8){var ci=cc.abs();if(ci.t<=0){return}var ca=this.abs();if(ca.t<ci.t){if(b9!=null){b9.fromInt(0)}if(b8!=null){this.copyTo(b8)}return}if(b8==null){b8=aH()}var b6=aH(),b3=this.s,cb=cc.s;var ch=this.DB-aJ(ci[ci.t-1]);if(ch>0){ci.lShiftTo(ch,b6);ca.lShiftTo(ch,b8)}else{ci.copyTo(b6);ca.copyTo(b8)}var ce=b6.t;var b4=b6[ce-1];if(b4==0){return}var cd=b4*(1<<this.F1)+((ce>1)?b6[ce-2]>>this.F2:0);var cl=this.FV/cd,ck=(1<<this.F1)/cd,cj=1<<this.F2;var cg=b8.t,cf=cg-ce,b7=(b9==null)?aH():b9;b6.dlShiftTo(cf,b7);if(b8.compareTo(b7)>=0){b8[b8.t++]=1;b8.subTo(b7,b8)}bU.ONE.dlShiftTo(ce,b7);b7.subTo(b6,b6);while(b6.t<ce){b6[b6.t++]=0}while(--cf>=0){var b5=(b8[--cg]==b4)?this.DM:Math.floor(b8[cg]*cl+(b8[cg-1]+cj)*ck);if((b8[cg]+=b6.am(0,b5,b8,cf,0,ce))<b5){b6.dlShiftTo(cf,b7);b8.subTo(b7,b8);while(b8[cg]<--b5){b8.subTo(b7,b8)}}}if(b9!=null){b8.drShiftTo(ce,b9);if(b3!=cb){bU.ZERO.subTo(b9,b9)}}b8.t=ce;b8.clamp();if(ch>0){b8.rShiftTo(ch,b8)}if(b3<0){bU.ZERO.subTo(b8,b8)}}function bg(b3){var b4=aH();this.abs().divRemTo(b3,null,b4);if(this.s<0&&b4.compareTo(bU.ZERO)>0){b3.subTo(b4,b4)}return b4}function bc(b3){this.m=b3}function bs(b3){if(b3.s<0||b3.compareTo(this.m)>=0){return b3.mod(this.m)}else{return b3}}function bM(b3){return b3}function bb(b3){b3.divRemTo(this.m,null,b3)}function a9(b3,b5,b4){b3.multiplyTo(b5,b4);this.reduce(b4)}function bX(b3,b4){b3.squareTo(b4);this.reduce(b4)}bc.prototype.convert=bs;bc.prototype.revert=bM;bc.prototype.reduce=bb;bc.prototype.mulTo=a9;bc.prototype.sqrTo=bX;function a2(){if(this.t<1){return 0}var b3=this[0];if((b3&1)==0){return 0}var b4=b3&3;b4=(b4*(2-(b3&15)*b4))&15;b4=(b4*(2-(b3&255)*b4))&255;b4=(b4*(2-(((b3&65535)*b4)&65535)))&65535;b4=(b4*(2-b3*b4%this.DV))%this.DV;return(b4>0)?this.DV-b4:-b4}function aF(b3){this.m=b3;this.mp=b3.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<(b3.DB-15))-1;this.mt2=2*b3.t}function bL(b3){var b4=aH();b3.abs().dlShiftTo(this.m.t,b4);b4.divRemTo(this.m,null,b4);if(b3.s<0&&b4.compareTo(bU.ZERO)>0){this.m.subTo(b4,b4)}return b4}function bV(b3){var b4=aH();b3.copyTo(b4);this.reduce(b4);return b4}function bj(b3){while(b3.t<=this.mt2){b3[b3.t++]=0}for(var b5=0;b5<this.m.t;++b5){var b4=b3[b5]&32767;var b6=(b4*this.mpl+(((b4*this.mph+(b3[b5]>>15)*this.mpl)&this.um)<<15))&b3.DM;b4=b5+this.m.t;b3[b4]+=this.m.am(0,b6,b3,b5,0,this.m.t);while(b3[b4]>=b3.DV){b3[b4]-=b3.DV;b3[++b4]++}}b3.clamp();b3.drShiftTo(this.m.t,b3);if(b3.compareTo(this.m)>=0){b3.subTo(this.m,b3)}}function bO(b3,b4){b3.squareTo(b4);this.reduce(b4)}function a0(b3,b5,b4){b3.multiplyTo(b5,b4);this.reduce(b4)}aF.prototype.convert=bL;aF.prototype.revert=bV;aF.prototype.reduce=bj;aF.prototype.mulTo=a0;aF.prototype.sqrTo=bO;function aI(){return((this.t>0)?(this[0]&1):this.s)==0}function aZ(b8,b9){if(b8>4294967295||b8<1){return bU.ONE}var b7=aH(),b3=aH(),b6=b9.convert(this),b5=aJ(b8)-1;b6.copyTo(b7);while(--b5>=0){b9.sqrTo(b7,b3);if((b8&(1<<b5))>0){b9.mulTo(b3,b6,b7)}else{var b4=b7;b7=b3;b3=b4}}return b9.revert(b7)}function bP(b4,b3){var b5;if(b4<256||b3.isEven()){b5=new bc(b3)}else{b5=new aF(b3)}return this.exp(b4,b5)}bU.prototype.copyTo=bv;bU.prototype.fromInt=aP;bU.prototype.fromString=aY;bU.prototype.clamp=bh;bU.prototype.dlShiftTo=bS;bU.prototype.drShiftTo=bu;bU.prototype.lShiftTo=aV;bU.prototype.rShiftTo=aM;bU.prototype.subTo=bz;bU.prototype.multiplyTo=a5;bU.prototype.squareTo=bk;bU.prototype.divRemTo=a6;bU.prototype.invDigit=a2;bU.prototype.isEven=aI;bU.prototype.exp=aZ;bU.prototype.toString=aT;bU.prototype.negate=bl;bU.prototype.abs=bN;bU.prototype.compareTo=a8;bU.prototype.bitLength=aW;bU.prototype.mod=bg;bU.prototype.modPowInt=bP;bU.ZERO=aC(0);bU.ONE=aC(1);function aL(){this.i=0;this.j=0;this.S=new Array()}function aD(b6){var b5,b3,b4;for(b5=0;b5<256;++b5){this.S[b5]=b5}b3=0;for(b5=0;b5<256;++b5){b3=(b3+this.S[b5]+b6[b5%b6.length])&255;b4=this.S[b5];this.S[b5]=this.S[b3];this.S[b3]=b4}this.i=0;this.j=0}function ay(){var b3;this.i=(this.i+1)&255;this.j=(this.j+this.S[this.i])&255;b3=this.S[this.i];this.S[this.i]=this.S[this.j];this.S[this.j]=b3;return this.S[(b3+this.S[this.i])&255]}aL.prototype.init=aD;aL.prototype.next=ay;function bQ(){return new aL()}var bf=256;var aN;var bo;var bA;function aA(b3){bo[bA++]^=b3&255;bo[bA++]^=(b3>>8)&255;bo[bA++]^=(b3>>16)&255;bo[bA++]^=(b3>>24)&255;if(bA>=bf){bA-=bf}}function bn(){aA(new Date().getTime())}if(bo==null){bo=new Array();bA=0;var ba;if(navigator.appName=="Netscape"&&navigator.appVersion<"5"&&window.crypto){if(window.crypto.random){var a7=window.crypto.random(32);for(ba=0;ba<a7.length;++ba){bo[bA++]=a7.charCodeAt(ba)&255}}}while(bA<bf){ba=Math.floor(65536*Math.random());bo[bA++]=ba>>>8;bo[bA++]=ba&255}bA=0;bn()}function a3(){if(aN==null){bn();aN=bQ();aN.init(bo);for(bA=0;bA<bo.length;++bA){bo[bA]=0}bA=0}return aN.next()}function bY(b4){var b3;for(b3=0;b3<b4.length;++b3){b4[b3]=a3()}}function bC(){}bC.prototype.nextBytes=bY;function aG(b4,b3){return new bU(b4,b3)}function bG(b5,b6){var b3="";var b4=0;while(b4+b6<b5.length){b3+=b5.substring(b4,b4+b6)+"\n";b4+=b6}return b3+b5.substring(b4,b5.length)}function aS(b3){if(b3<16){return"0"+b3.toString(16)}else{return b3.toString(16)}}function bF(b6,b9){if(b9<b6.length+11){alert("Message too long for RSA");return null}var b8=new Array();var b5=b6.length-1;while(b5>=0&&b9>0){var b7=b6.charCodeAt(b5--);if(b7<128){b8[--b9]=b7}else{if((b7>127)&&(b7<2048)){b8[--b9]=(b7&63)|128;b8[--b9]=(b7>>6)|192}else{b8[--b9]=(b7&63)|128;b8[--b9]=((b7>>6)&63)|128;b8[--b9]=(b7>>12)|224}}}b8[--b9]=0;var b4=new bC();var b3=new Array();while(b9>2){b3[0]=0;while(b3[0]==0){b4.nextBytes(b3)}b8[--b9]=b3[0]}b8[--b9]=2;b8[--b9]=0;return new bU(b8)}function be(){this.n=null;this.e=0;this.d=null;this.p=null;this.q=null;this.dmp1=null;this.dmq1=null;this.coeff=null}function aQ(b4,b3){if(b4!=null&&b3!=null&&b4.length>0&&b3.length>0){this.n=aG(b4,16);this.e=parseInt(b3,16)}else{alert("Invalid RSA public key")}}function bt(b3){return b3.modPowInt(this.e,this.n)}function aR(b5){var b3=bF(b5,(this.n.bitLength()+7)>>3);if(b3==null){return null}var b6=this.doPublic(b3);if(b6==null){return null}var b4=b6.toString(16);if((b4.length&1)==0){return b4}else{return"0"+b4}}be.prototype.doPublic=bt;be.prototype.setPublic=aQ;be.prototype.encrypt=aR;window.RSAKey=be})();window.setLoginStatus=function(ay){window.loginStatus=ay};function ax(az){var ay=az,aA=false;ay.id="wb-article-shade";if(typeof Settingpage!="undefined"&&Z.browser.msie&&Z.browser.version<7){ay.innerHTML="<iframe style='position:absolute;width:100%;height:100%;_filter:alpha(opacity=0);opacity=0;border:1px solid #DDD;z-index:-1;top:100;left:0;'></iframe>"}this.show=function(){var aB=this;aB._setposEvent=null;if(!aA){ay.style.width=window.screen.width+"px";ay.style.height=window.screen.height+"px";ay.style.top="0px";if(Z.browser.msie&&Z.browser.version<7){var aC=function(){aB.IE6Position()};aB.IE6Position();aB._setposEvent&&window.removeEvent("scroll",aC);aB._setposEvent=window.addEvent("scroll",aC)}ay.style.display="block";aA=true}};this.IE6Position=function(){var aB=Math.max(document.documentElement.scrollHeight,document.documentElement.clientHeight);ay.style.width=Math.max(document.documentElement.scrollWidth,document.documentElement.clientWidth)+"px";ay.style.position="absolute";ay.style.height=Math.min(aB,3000)+"px";ay.style.top=Math.min(Math.max((aB-3000),0),Math.max((document.documentElement.scrollTop-3000)+window.screen.availHeight,0))+"px"};this.hide=function(){if(aA){ay.style.display="none";aA=false}}}Z.ui.DragHandler=function(aC,aF){this.constructor=arguments.callee;var aA=Z.style.getCurrentStyle(aC,"position").toLowerCase()==="fixed",aI={x:aC.offsetLeft||0-(aA?Z(document.body).scrollLeft:0),y:aC.offsetTop||0-(aA?Z(document.body).scrollTop:0)},aG,ay,aB,aE;function aD(aK){var aJ={x:Math.max(0,Math.min(document.documentElement.scrollWidth-aC.offsetWidth,aK.pageX-aG.x)),y:Math.max(0,Math.min(document.documentElement.scrollHeight-aC.offsetHeight,aK.pageY-aG.y))};aC.style.left=aJ.x+"px";aC.style.top=aJ.y+"px";aI={x:aJ.x-(aA?Z(document.body).scrollLeft:0),y:aJ.y-(aA?Z(document.body).scrollTop:0)};aB&&aB(aC,this,aJ);aK.cancelBubble=true}function az(){if(aC.releaseCapture){aC.releaseCapture()}else{if(window.captureEvents){window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP)}}Z(document.body).removeEvent("mousemove",aD);Z(document.body).removeEvent("mouseup",az);aE&&aE(aC)}function aH(aJ){if(aC.setCapture){aC.setCapture()}else{if(window.captureEvents){window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP)}}aG={x:aJ.pageX-aC.offsetLeft,y:aJ.pageY-aC.offsetTop};Z(document.body).addEvent("mousemove",aD);Z(document.body).addEvent("mouseup",az);ay&&ay(aC,this);aJ.preventDefault()}this.setOnDragStart=function(aJ){ay=aJ};this.setOnMove=function(aJ){onMove=aJ};this.setOnStopMove=function(aJ){onStopMove=aJ};this.init=function(){Z.event.addEvent(aF,"mousedown",aH)}};Z.ui.WinLayer=function(aD,aA,aC,az,ay){if(!arguments.length){return}var aB=this;aB.constructor=arguments.callee;aB._wrapper=aD;aB._showType=aC||"display";aB._showTypeObject={display:{show:"block",hidden:"none"},visibility:{show:"visible",hidden:"hidden"}};aB._isDeleteNode=az||false;aB._isShowed=Z.style.getCurrentStyle(aD,aB._showType).toLowerCase()!=aB._showTypeObject[aB._showType].hidden;aB._isFixed=Z.style.getCurrentStyle(aD,"position").toLowerCase()=="fixed";aB._isShade=aA;aB.isClickClose=ay;(new Z.ui.DragHandler(aD,aD.$(".wb-article-popupLayer-hd,.wb-article-dragBar"))).init();aD.$("a.wb-article-popupLayer-close,.wb-article-common-close").addEvent("click",function(aE){aB.hide();aE.cancelBubble=true;return false}.bind(aB)).addEvent("drag",function(aE){aE.cancelBubble=true})};Z.ui.WinLayer.prototype={getWidth:function(){return this._wrapper.offsetWidth},getHeight:function(){return this._wrapper.offsetHeight},show:function(ay,aE,az){var aA=this;if(!aA._isShowed){var aD=aA._wrapper;if(Z.browser.msie&&Z.browser.version<7){aA._tempTop=document.documentElement.scrollTop;aA._tempScroll=aA._scroll.bind(aA);window.addEvent("scroll",aA._tempScroll)}var aC,aB;if(aA._isFixed){aC=null==ay||isNaN(ay)?parseInt((document.documentElement.clientWidth-aD.offsetWidth)/2):ay-document.documentElement.scrollLeft;aB=null==aE||isNaN(aE)?parseInt((document.documentElement.clientHeight-aD.offsetHeight)/2.3):aE-(document.documentElement.scrollTop==0?Z(document.body).scrollTop:document.documentElement.scrollTop)}else{aC=null==ay||isNaN(ay)?parseInt((document.documentElement.clientWidth-aD.offsetWidth)/2+document.documentElement.scrollLeft):ay;aB=null==aE||isNaN(aE)?parseInt((document.documentElement.clientHeight-aD.offsetHeight)/2.3+Math.max(Z(document.body).scrollTop,document.documentElement.scrollTop)):aE}aD.style.left=aC+"px";aD.style.top=aB+"px";aD.style[aA._showType]=aA._showTypeObject[aA._showType].show;aA.onShow&&aA.onShow();aA._isShowed=true;az&&(aA._hideTimer=setTimeout(function(){aA.hide()},az*1000));aA._isShade&&B.shade.show();aA.keydownBindEvent=aA.keydownListionEvent.bind(aA);Z(document).addEvent("keydown",aA.keydownBindEvent);if(aA.isClickClose){aA.clickBindEvent=aA.clickListionEvent.bind(aA);Z(document).addEvent("click",aA.clickBindEvent)}}},hide:function(){var ay=this;if(ay._isShowed){ay._tempScroll&&window.removeEvent("scroll",ay._tempScroll);ay.onHide&&ay.onHide();ay._isShowed=false;if(ay._hideTimer){clearTimeout(ay._hideTimer);ay._hideTimer=null}ay._isShade&&B.shade.hide();Z(document).removeEvent("keydown",ay.keydownBindEvent);if(ay.isClickClose){Z(document).removeEvent("click",ay.clickBindEvent)}if(ay._isDeleteNode){ay._wrapper.parentNode.removeChild(ay._wrapper)}else{Z.style.addCss(ay._wrapper,ay._showType+":"+ay._showTypeObject[ay._showType].hidden+";left:0;top:0;")}}},_scroll:function(){var ay=this;ay._wrapper.style.top=parseInt(ay._wrapper.style.top)+document.documentElement.scrollTop-ay._tempTop;ay._tempTop=document.documentElement.scrollTop},keydownListionEvent:function(az){var ay=this;if(az.keyCode==27){ay.hide()}},clickListionEvent:function(az){var ay=this,aA=az.target?az.target:event.srcElement;do{if(aA.className=="dialog"){return}if(aA.tagName.toUpperCase()=="BODY"||aA.tagName.toUpperCase()=="HTML"){ay.hide();return}aA=aA.parentNode}while(aA.parentNode)}};(function(aH,aF){var ay="NTES";var aB=ay+"AnimateId",aC={};var az=aH.style.getCurrentStyle;function aL(aP,aQ,aN){var aO=aP["offset"+aQ];aN=aN||"";aH.each("Width"==aQ?["Left","Right"]:["Top","Bottom"],function(aR,aS){if(-1==aN.indexOf("padding")){aO-=parseFloat(az(aP,"padding"+aS))||0}if(-1==aN.indexOf("border")){aO-=parseFloat(az(aP,"border"+aS+"Width"))||0}if(aN.indexOf("margin")!=-1){aO+=parseFloat(az(aP,"margin"+aS))||0}});return aO}aH.element.width=function(){if("number"==typeof arguments[0]){return this.addCss({width:arguments[0]+"px"})}else{return aL(this.get(0),"Width",arguments[0])}};aH.element.height=function(){if("number"==typeof arguments[0]){return this.addCss({height:arguments[0]+"px"})}else{return aL(this.get(0),"Height",arguments[0])}};var aA=/opacity=([^,)]*)/;var aK=/alpha\([^\)]*\)/;aH.element.opacity=function(aQ){if("number"==typeof aQ){return this.each(function(){if(this.style.opacity===aF){var aR=az(this,"filter")||"",aS="alpha(opacity="+aQ*100+")";this.style.filter=aK.test(aR)?aR.replace(aK,aS):aS}else{this.style.opacity=aQ}})}else{var aP=this.get(0),aN,aO;if(aP.style.opacity===aF){aN=aA.test(az(aP,"filter")||"")?(aN=parseFloat(RegExp.$1)/100):""}else{aN=this.style.opacity||az(aP,"opacity");aN!==""&&(aN=parseFloat(aN))}return""===aN?1:aN}};var aE=/^\-{0,1}\d+(?:\.\d+)?[^\s]*$/;var aD=/^(?:width|height|opacity)$/i;var aG=/^(?:zIndex|fontWeight|opacity|zoom|lineHeight)$/;function aJ(aO){var aN=aE.test(aO)?parseFloat(aO)||0:aO.toLowerCase();return aN}function aI(aN,aP){var aO=[],aQ;for(aQ in aP){aP[aQ]=aJ(aP[aQ]);aN.each(function(aR){!aO[aR]&&(aO[aR]={});aO[aR][aQ]=aD.test(aQ)?aH(this)[aQ]():aJ(az(this,aQ))})}return aO}aH.element.animate=function(aR,aS,aT,aU){typeof aT!=="function"&&(aT=aM[aT]);aS=aS*1000;aR=aH.style.parse(aR);var aO=this;aO.stop();var aQ=aI(aO,aR);"visible"==aR.visibility&&aO.addCss({visibility:"visible"});"block"==aR.display&&aO.addCss({display:"block"});var aP=Date.now();var aN=setInterval(function(){var aX=Date.now()-aP,aW=aX/aS,a1,a2,a0,aZ,aY,aV=aQ.length;for(aZ in aR){aY=-1;while(++aY<aV){a1=aQ[aY][aZ];a2=aR[aZ];if("number"==typeof a1&&a1!=a2){a0=a1+(a2-a1)*aT(0,1,aW);((a2>a1&&a0>a2)||(a2<a1&&a0<a2))&&(a0=a2);if(aD.test(aZ)){aO.$(aY)[aZ](a0)}else{aO.get(aY).style[aZ]=aG.test(aZ)?a0:a0+"px"}}}}if(aX>=aS){if(!aC[aN]){clearInterval(aN);"hidden"==aR.visibility&&aO.addCss({visibility:"hidden"});"none"==aR.display&&aO.addCss({display:"none"});aU&&aU();aC[aN]=true}}},13);return this.attr(aB,new Number(aN))};aH.element.stop=function(){return this.each(function(){var aO=this[aB];if(aO!=null){if(!aC[aO]){clearInterval(aO);aC[aO]=true}try{delete this[aB]}catch(aN){}}})};var aM={linear:function(aN,aP,aO){return aN+aP*aO}}})(NTES);function o(aA,az){if(!arguments.length){return}var ay=this;ay.constructor=arguments.callee;ay.usernameInputElement=false;ay.usernameInputElementX=false;ay.usernameInputElementY=false;ay.usernameInputHeight=false;ay.usernameListElement=false;ay._initWidth=0;ay._runFuc=az;ay.currentSelectIndex=-1;ay.domainSelectElmentString='<div style="padding:0px; margin-top:-3px;"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td class="title" style="title" >请选择或继续输入...</td></tr><tr><td><td /></tr></tbody></table></div><div style="display: none;"></div><div id="passport_111"></div>';ay.domainSelectElement=false;ay.domainArray=["163.com","126.com","yeah.net","qq.com","vip.163.com","vip.126.com","188.com","gmail.com","sina.com","hotmail.com"];ay.helpDivString='<div style="width:100%;" id="passport_helper_div"></div>';ay.bind(aA)}o.prototype={bind:function(aA){var ay=this;ay.usernameInputElement=aA;var az=Y(ay.usernameInputElement);ay.usernameInputElementX=az.x;ay.usernameInputElementY=az.y;ay.handle();Z(ay.usernameInputElement).addEvent("focus",function(){ay._initWidth=(ay.usernameInputElement.offsetWidth-4);ay.domainSelectElement.style.width=(ay.usernameInputElement.offsetWidth-4)+"px"})},resizeFunc:function(){var aA=this;var aB=document.getElementById("passportusernamelist");var az=Y(aA.usernameInputElement).x;var ay=Y(aA.usernameInputElement).y;aB.style.left=az+"px";aB.style.top=(ay+aA.usernameInputElement.offsetHeight)+"px"},handle:function(){var az=this;if(!document.getElementById("passportusernamelist")){var ay=document.createElement("DIV");ay.id="passportusernamelist";ay.className="wb-article-domainSelector";ay.style.position="absolute";ay.style.display="none";document.body.appendChild(ay);ay.innerHTML=az.domainSelectElmentString}az.domainSelectElement=document.getElementById("passportusernamelist");az.usernameListElement=az.domainSelectElement.firstChild.firstChild.rows[1].firstChild;az.currentSelectIndex=0;az.usernameInputElement.onblur=function(){az.doSelect.call(az)};try{this.usernameInputElement.addEventListener("keypress",az.keypressProc.bind(az),false);this.usernameInputElement.addEventListener("keyup",az.keyupProc.bind(az),false)}catch(aA){try{this.usernameInputElement.attachEvent("onkeydown",az.checkKeyDown.bind(az));this.usernameInputElement.attachEvent("onkeypress",az.keypressProc.bind(az));this.usernameInputElement.attachEvent("onkeyup",az.keyupProc.bind(az))}catch(aA){}}az.resizeFunc();if(navigator.userAgent.indexOf("MSIE")>0){window.attachEvent("onresize",function(){az.resizeFunc()})}else{window.onresize=az.resizeFunc()}},preventEvent:function(ay){ay.cancelBubble=true;ay.returnValue=false;if(ay.preventDefault){ay.preventDefault()}if(ay.stopPropagation){ay.stopPropagation()}},checkKeyDown:function(az){var ay=this;var aA=az.keyCode;if(aA==38||aA==40){ay.clearFocus();if(aA==38){ay.upSelectIndex()}else{ay.downSelectIndex()}ay.setFocus()}},keyupProc:function(aA){var az=this;var aB=aA.keyCode;az.changeUsernameSelect();if(aB==13){az.doSelect()}var ay;if((ay=navigator.userAgent.indexOf("Safari"))>0){if(aB==38||aB==40){az.preventEvent(aA);az.clearFocus();if(aB==38){az.upSelectIndex()}else{az.downSelectIndex()}az.setFocus()}}},keypressProc:function(az){var ay=this;var aA=az.keyCode;if(aA==13){ay.preventEvent(az)}else{if(aA==38||aA==40){ay.clearFocus();if(aA==38){ay.upSelectIndex()}else{ay.downSelectIndex()}ay.setFocus()}else{ay.changeUsernameSelect()}}},clearFocus:function(az){var aA=this;var az=aA.currentSelectIndex;try{var ay=aA.findTdElement(az);ay.style.backgroundColor="white"}catch(aB){}},findTdElement:function(az){var aB=this;try{var ay=aB.usernameListElement.firstChild.rows;for(var aA=0;aA<ay.length;++aA){if(ay[aA].firstChild.idx==az){return ay[aA].firstChild}}}catch(aC){}return false},upSelectIndex:function(){var aB=this;var az=aB.currentSelectIndex;if(aB.usernameListElement.firstChild==null){return}var ay=aB.usernameListElement.firstChild.rows;var aA;for(aA=0;aA<ay.length;++aA){if(ay[aA].firstChild.idx==az){break}}if(aA==0){aB.currentSelectIndex=(ay.length-1)}else{aB.currentSelectIndex=ay[aA-1].firstChild.idx}},downSelectIndex:function(){var aB=this;var az=aB.currentSelectIndex;if(aB.usernameListElement.firstChild==null){return}var ay=aB.usernameListElement.firstChild.rows;var aA=0;for(;aA<ay.length;++aA){if(ay[aA].firstChild.idx==az){break}}if(aA>=ay.length-1){aB.currentSelectIndex=ay[0].firstChild.idx}else{aB.currentSelectIndex=ay[aA+1].firstChild.idx}},setFocus:function(){var aA=this;var az=aA.currentSelectIndex;try{var ay=aA.findTdElement(az);ay.style.backgroundColor="#D5F1FF"}catch(aB){}},changeUsernameSelect:function(){var aJ=this;var aB=this.usernameInputElement.value;if(aB.trim()==""){this.domainSelectElement.style.display="none"}else{var aD="",aI="";var aH;if((aH=aB.indexOf("@"))<0){aD=aB;aI=""}else{aD=aB.substr(0,aH);aI=aB.substr(aH+1,aB.length)}var aF=[];if(aI==""){for(var aE=0;aE<this.domainArray.length;++aE){aF.push(aD+"@"+this.domainArray[aE])}}else{for(var aE=0;aE<this.domainArray.length;++aE){if(this.domainArray[aE].indexOf(aI)==0){aF.push(aD+"@"+this.domainArray[aE])}}}if(aF.length>0){aJ.resizeFunc();aJ.domainSelectElement.style.zIndex="10000";aJ.domainSelectElement.style.paddingRight="0";aJ.domainSelectElement.style.paddingLeft="0";aJ.domainSelectElement.style.paddingTop="2px";aJ.domainSelectElement.style.paddingBottom="0";aJ.domainSelectElement.style.backgroundColor="white";aJ.domainSelectElement.style.display="block";var aK=document.createElement("TABLE");aK.cellSpacing=0;aK.cellPadding=3;var aC=document.createElement("TBODY");aK.appendChild(aC);for(var aE=0;aE<aF.length;++aE){var aG=document.createElement("TR");var az=document.createElement("TD");az.nowrap="true";az.align="left";az.innerHTML=aF[aE];az.idx=aE;az.onmouseover=function(){aJ.clearFocus();aJ.currentSelectIndex=this.idx;aJ.setFocus();this.style.cursor="hand"};az.onmouseout=function(){};az.onclick=function(){aJ.doSelect()};aG.appendChild(az);aC.appendChild(aG)}aJ.usernameListElement.innerHTML="";aJ.usernameListElement.appendChild(aK);var ay=0;for(var aA=0;aA<aF.length;++aA){if(aF[aA].length>ay){ay=aF[aA].length}}ay=ay*7.4;if(ay<aJ._initWidth){ay=aJ._initWidth}aK.style.width=ay+"px";this.domainSelectElement.style.width=aK.style.width;this.setFocus()}else{this.domainSelectElement.style.display="none";this.currentSelectIndex=-1}}},doSelect:function(){var az=this;az.domainSelectElement.style.display="none";if(az.usernameInputElement.value.trim()==""){return}var ay=az.findTdElement(az.currentSelectIndex);if(ay){az.usernameInputElement.value=ay.innerHTML}az._runFuc()}};function am(ay){this.options={size:15,maxButtons:9,itemCount:0,index:1,pageCount:1};this.container=null;this._start=1;this._end=1;this.options.pageCount=Math.ceil(this.options.itemCount/this.options.size);for(var az in ay){this.options[az]=ay[az]}this.staticDataCollection=[]}am.prototype={onclick:function(ay){return true},_onclick:function(az){var ay=this.options.index;this.options.index=az;if(this.onclick(az)!==false){this.render(this.wraperId)}else{this.options.index=ay}},_calculate:function(){this.options.pageCount=parseInt(Math.ceil(this.options.itemCount/this.options.size));this.options.index=parseInt(this.options.index);if(this.options.index>this.options.pageCount){this.options.index=this.options.pageCount}if(this.options.index<1){this.options.index=1}this._start=Math.max(1,this.options.index-parseInt(this.options.maxButtons/2));this._end=Math.min(this.options.pageCount,this._start+this.options.maxButtons-1);this._start=Math.max(1,this._end-this.options.maxButtons+1)},page:function(aA){this._calculate();var ay=(this.index-1)*this.options.size;var az=this.index*this.options.size;return aA.slice(ay,az)},render:function(){return true},bind:function(){var aA=this.container.getElementsByTagName("a");var az=this;for(var ay=0;ay<aA.length;ay++){aA[ay].onclick=function(){var aB=this.getAttribute("href");if(aB!=undefined&&aB!=""){aB=parseInt(aB.replace("javascript://",""));az._onclick(aB)}return false}}},getStaticData:function(az){var aB=[];if(this.options.size>this.staticDataCollection.length){return this.staticDataCollection}else{if(az>this.options.pageCount){return[]}else{if(az<=this.options.pageCount){for(var aA=0;aA<this.staticDataCollection.length;aA++){for(var ay=0;ay<this.options.size;ay++){if(aA==(az-1)*this.options.size+ay){aB.push(this.staticDataCollection[aA])}}}return aB}}}}};function g(aC,az,aB,aA){var ay=this;ay._wrapperId=aC;ay._wrapperClass=az;ay._wrapperTemplatesHtml=aB;ay.wrapperElem=Z(document.createElement("DIV"));ay.wrapperElem.style.width=aA+"px";ay.wrapperElem.id=ay._wrapperId;ay.wrapperElem.className=ay._wrapperClass;ay.wrapperElem.innerHTML=ay._wrapperTemplatesHtml;Z(document.body).appendChild(ay.wrapperElem);ay.commonPopWindow=new Z.ui.WinLayer(ay.wrapperElem,true,"visibility",true)}g.prototype.show=function(){this.commonPopWindow.show()};g.prototype.hide=function(){this.commonPopWindow.hide()};function aq(aD,aF){var aC=Z.cookie.get("P_INFO");var aE=aC!=""?aC.substr(0,aC.indexOf("|")):"";if(B.email!=""&&typeof B.email!="undefined"){aE=B.email}var aA={userNameNodeId:"loginEmail",passwordNodeId:"loginPassword",saveLoginNodeId:"saveLogin",btnNodeId:"loginBtn",btnText:aD,errorNodeId:"error",proccessingNodeId:"proccessing",registerBtnNodeId:"registerBtn",email:aE,width:580,sideWidth:180,formWidth:360};var ay={title:"网易微博登录",content:Z.util.parseTpl(l.loginForm,aA)};this.miniLoginWindow=new g("miniLoginWindow","wb-article-newdialogLayer wb-article-common",Z.util.parseTpl(l.commonPopWindow,ay),600);this.refer=aF;this.proccessingNode=Z("#"+aA.proccessingNodeId);this.errorNode=Z("#"+aA.errorNodeId);this.userNameNode=Z("#"+aA.userNameNodeId);this.passwordNode=Z("#"+aA.passwordNodeId);this.btnNode=Z("#"+aA.btnNodeId);this.saveLoginNode=Z("#"+aA.saveLoginNodeId);this.registerBtnNode=Z("#"+aA.registerBtnNodeId);var az={};az.method="op.regfrom";az.keyfrom=this.refer.keyfrom;az.sitechannel=this.refer.sitechannel;this.registerBtnNode.href=B.url.wbarticleRegister;this.registerBtnNode.addEvent("click",function(){ae(az)});var aG=this;var aB=Z("#wb-article-autologin_tiparea");Z("#wb-article-popLogin-remmber-chk").addEvent("mouseover",function(){aB.addCss("display:block")}).addEvent("mouseout",function(){aB.addCss("display:none")});if(aE==""){Z("#wb-article-login-area-hint").style.display="block"}Z("#wb-article-login-area-hint").addEvent("click",function(){this.style.display="none";aG.userNameNode.focus()});aG.userNameNode.addEvent("blur",function(){if(aG.userNameNode.value.trim()==""){Z("#wb-article-login-area-hint").style.display="block"}});q(aG.userNameNode,function(){var aH=aG.userNameNode.value.trim();if(aH!=""){aG.passwordNode.focus()}});q(aG.passwordNode,function(){aG.send()});new o(aG.userNameNode,function(){aG.passwordNode.focus()});this.init()}aq.prototype.show=function(){this.miniLoginWindow.show()};aq.prototype.hide=function(){this.miniLoginWindow.hide()};aq.prototype.afterAction=function(){};aq.prototype.loginOpenAction=function(){};aq.prototype.showMessage=function(ay){var az=this;az.errorNode.innerHTML=ay;setTimeout(function(){az.errorNode.innerHTML=""},2000);az.proccessingNode.innerHTML=""};aq.prototype.showProccessing=function(){this.proccessingNode.innerHTML="登录中，请稍后..."};aq.prototype.send=function(){var aB=this;var aC=f(aB.userNameNode.attr("value"));var az=f(aB.passwordNode.attr("value"));if(aC==""){aB.showMessage("帐号不能为空");return}if(az==""){aB.showMessage("密码不能为空");return}aB.showProccessing();var aD={};aD.method="op.login";aD.keyfrom=aB.refer.keyfrom;aD.sitechannel=aB.refer.sitechannel;window.logintimestamp=new Date().getTime();var aA=BASE64(aC),ay=aB.saveLoginNode.checked?1:0;var aE={url:B.url.wbarticleLogin1,param:{rnd:aA,jsonp:"setLoginStatus"},callBack:function(){if(typeof loginStatus=="undefined"){return}var aG=loginStatus.split("\n"),aK=aG[0];if(aK=="200"){var aL=aG[1],aF=aG[2];var aJ=new RSAKey();aJ.setPublic(aF,aL);var aH=aJ.encrypt(getMd5(az));var aI={url:B.url.wbarticleLogin2,param:{rcode:aH,product:"t",jsonp:"setLoginStatus",savelogin:ay,username:aC},callBack:function(){if(typeof loginStatus=="undefined"){return}switch(loginStatus){case"200":var aM={url:B.url.wbarticleCheckStatus,param:{screenName:"163",timestamp:(new Date()).getTime()},callBack:function(){if(typeof shareResult=="undefined"){return}B.email=shareResult.email;switch(shareResult.status){case"1":aB.showMessage("登录成功");setTimeout(function(){aB.hide()},1000);setTimeout(function(){aB.afterAction()},2000);ae(aD);break;case"-1":aB.showMessage("发生错误，请稍后再试");break;case"-3":setTimeout(function(){aB.hide()},1000);setTimeout(function(){aB.loginOpenAction()},2000);break;case"-5":aB.showMessage("登录失败");break;default:break}}};aa(aM);break;case"420":aB.showMessage("用户名错误");break;case"460":aB.showMessage("密码错误");break;case"428":window.location.href=B.url.wbarticleLogin2+"?rcode="+aH+"&product=t&url="+window.location.href+"&savelogin="+ay+"&username="+aC;break;default:aB.showMessage("登录错误次数太多，请稍后再试");break}}};aa(aI)}else{aB.showMessage("登录失败")}loginStatus&&delete loginStatus}};aa(aE);return false};aq.prototype.init=function(){var ay=this;ay.btnNode.addEvent("click",function(){ay.send();return false})};function ad(aC,aB){var aE=Z.cookie.get("P_INFO");var az=aE!=""?aE.substr(0,aE.indexOf("|")):"";if(B.email!=""&&typeof B.email!="undefined"){az=B.email}var ay={userNameNodeId:"loginEmail",btnNodeId:"loginBtn",btnText:aC,errorNodeId:"error",proccessingNodeId:"proccessing",changeAccountNodeId:"changeAccount",email:az,width:580};var aD={title:"开通网易微博",content:Z.util.parseTpl(l.openForm,ay)};this.miniOpenWindow=new g("miniOpenWindow","wb-article-newdialogLayer wb-article-common",Z.util.parseTpl(l.commonPopWindow,aD),600);this.refer=aB;this.proccessingNode=Z("#"+ay.proccessingNodeId);this.errorNode=Z("#"+ay.errorNodeId);this.userNameNode=Z("#"+ay.userNameNodeId);this.btnNode=Z("#"+ay.btnNodeId);this.changeAccountNode=Z("#"+ay.changeAccountNodeId);var aA=this;q(aA.userNameNode,function(){aA.send()});this.init()}ad.prototype.show=function(){this.miniOpenWindow.show()};ad.prototype.hide=function(){this.miniOpenWindow.hide()};ad.prototype.showNameFormat=function(ay){if(ay==""){this.showMessage("昵称不能为空");return false}if(ay.replace(/[\u4e00-\u9fa5]/g,"**").length>B.showNameMaxLen*2){this.showMessage("昵称不超过"+B.showNameMaxLen+"个汉字");return false}if(!B.reg.showNameReg.test(ay)){this.showMessage("只能是汉字、字母或数字");return false}return true};ad.prototype.afterAction=function(){};ad.prototype.changeAccountAction=function(){};ad.prototype.showMessage=function(ay){var az=this;az.errorNode.innerHTML=ay;setTimeout(function(){az.errorNode.innerHTML=""},2000);az.proccessingNode.innerHTML=""};ad.prototype.showProccessing=function(){this.proccessingNode.innerHTML="开通中，请稍后..."};ad.prototype.send=function(){var az=this;if(!az.showNameFormat(f(az.userNameNode.value))){return false}az.showProccessing();var ay={};ay.keyfrom=az.refer.keyfrom;ay.method="op.reg.nickname";ay.sitechannel=az.refer.sitechannel;ay.nickName=az.userNameNode.value;var aA={url:B.url.wbarticleCheckNickName,param:{showName:az.userNameNode.value},callBack:function(){if(typeof shareResult=="undefined"){return}switch(shareResult.status){case 0:var aB={url:B.url.wbarticleOpenAccount,param:ay,callBack:function(){if(typeof shareResult=="undefined"){return}switch(shareResult.status){case"1":az.showMessage("开通成功");setTimeout(function(){az.hide()},1000);setTimeout(function(){az.afterAction()},1500);break;case"0":az.showMessage("您已经开通微博，不能重复开通");break;case"-1":az.showMessage("开通失败");break;case"-10":az.showMessage("开通失败");break;case"3":az.showMessage("开通失败");break;default:az.showMessage("开通失败");break}}};aa(aB);break;case 1:az.showMessage("该用户昵称已存在");break;default:az.showMessage("开通失败");break}}};aa(aA)};ad.prototype.init=function(){var ay=this;ay.btnNode.addEvent("click",function(){ay.send();return false});ay.changeAccountNode.addEvent("click",function(){setTimeout(function(){ay.hide()},500);setTimeout(function(){ay.changeAccountAction()},1000)})};function ak(az,ay){this.loginWindow=new aq(az,ay)}function ag(az,ay){this.openAccount_miniwindow=new ad(az,ay)}function q(ay,az){ay.addEvent("keydown",function(aA){var aA=aA||window.event;if(aA.keyCode==13){aA.preventDefault();az();return}})}function Y(aA){var az=0,ay=0;while(aA!=document.body&&aA!=null){ay+=aA.offsetLeft;az+=aA.offsetTop;aA=aA.offsetParent}return{x:ay,y:az}}function W(aA){if(typeof aA=="undefined"){return""}if(typeof aA!="object"){throw new Error("data sended to the server must be 'object'")}var az=[];for(var ay in aA){az.push(encodeURIComponent(ay)+"="+encodeURIComponent(aA[ay]))}return az.join("&").replace(/%20/g,"+")}function aa(ay){Z.ajax.importJs(ay.url+"?"+W(ay.param),function(){ay.callBack()},"UTF-8")}function al(ay){Z.ajax.importJs(ay.url,function(){ay.callBack()},"UTF-8")}function f(ay){return ay.replace(/\s/g,"")}function F(aA,ay){function az(){}az.prototype=aA.prototype;ay.prototype=new az();ay.prototype.constructor=ay;ay.superclass=aA.prototype;if(aA.prototype.constructor==Object.prototype.constructor){aA.prototype.constructor=aA}}function m(ay,az){if(arguments.length!=2){throw new Error("the number of the args must be 2")}this.name=ay;this.attribute=az}m.ensureInherit=function(){try{if(arguments.length<2){throw new Error("the length of the args must be longer than 1")}var aB=arguments[0];for(var az=1;az<arguments.length;az++){if(arguments[az].constructor!==m){throw new Error("must be 'InterFace'")}for(var ay=0;ay<arguments[az].attribute.length;ay++){if(!aB[arguments[az].attribute[ay]]){throw new Error("the methods is not conducted properly")}}}}catch(aA){alert(aA)}};function ap(aA,ay){var az=ay.parentNode;az.insertBefore(aA,ay)}function C(aA,ay){var az=ay.parentNode;if(az.lastChild==ay){az.appendChild(aA)}else{az.insertBefore(aA,ay.nextSibling)}}function ae(ay){var az={method:"click"};for(var aA in ay){az[aA]=ay[aA]}var aB={url:B.url.auditlink,param:az,callBack:function(){}};aa(aB)}function M(aF,az,aE){var aA=aE;var aD="";var aC=0;for(i=0;i<aA;i++){var aG=aF.substring(i,i+1);var aB=aG.replace(/[^\u0000-\u007f]/g,"aa").length;if(aB==2){i++}else{aC+=1}}var ay=Math.ceil(aC/2);return aF.substr(az,aE+ay)}function X(){var az=window.location.href,aA=window.location.hash,ay=az.indexOf(aA),az=az.split("?")[0];if(ay!=-1&&aA!=""){return az.slice(0,ay)}return az}function S(az,aA){if(az.createTextRange){var ay=az.createTextRange();ay.move("character",aA);ay.select()}else{az.focus();az.setSelectionRange(aA,aA)}}function v(aC){if(document.selection){aC.focus();var az=document.selection.createRange();aC.select();var aA=document.selection.createRange();try{az.setEndPoint("StartToStart",aA);var ay=az.text.length;az.collapse(false);az.select();return ay}catch(aB){return aC.selectionStart}}else{return aC.selectionStart}}function L(ay){return typeof ay=="function"}Z.util.simpleParse=function(az,ay){return ay?String(az).replace(/<#=(\w+)#>/g,function(aA,aB){return ay[aB]!=null?ay[aB]:aA}):az};function H(aA,ay){if(!arguments.length){return}var az=this;az.wrapperElem=aA;az.textAreaElem=Z(az.wrapperElem.$("textarea")[0]);az.sendBtnElem=Z(az.wrapperElem.$(".sendinfo-btn")[0]);az.sendInfoTipElem=Z(az.wrapperElem.$(".sendinfoTip")[0]);az._maxLen=326;az._maxUrlLen=256;az._urlInclude=302;az._initTip=ay||"";az._isMoreLimit=false;az._isRequest=false;az._urlReg=/(http)s?:\/\/(?:[\w-]+\.?)+[\.\/\?%&=#@$(),;\[\]\-+_!:*~\w-]+/g}H.prototype={init:function(){var ay=this;ay.textAreaElem.value=ay._initTip;ay.textAreaElem.focus();ay.gotoTextPos(ay.textAreaElem,ay._initTip);ay.initTextAreaHandle();ay.countTips();ay.sendBtnElem.addEvent("click",ay.sendInfo.bind(ay))},gotoTextPos:function(aD,aF){var aA=this;var aC=aF.length;var aB=new RegExp(aF,"g");var az=aD.value.search(aB);if(az==-1){var aE=v(aD);var ay=aD.value;aD.value=ay.substring(0,aE)+aF+ay.substring(aE,ay.length);S(aD,aE+aC)}else{S(aD,az+aC)}aA.countTips()},deleteUrl:function(ay){var aA=this;var az=new RegExp(ay,"gi");aA.textAreaElem.value=aA.textAreaElem.value.trim().replace(az,function(aB){return""});aA.countTips()},countTips:function(){var az=this,ay=az.textAreaElem.value;if(ay.match(/^\s+$/)){ay=""}else{ay=ay.replace(az._urlReg,function(aC){if(aC.length>az._maxUrlLen){return aC.substr((az._maxUrlLen-22),aC.length)}return !aC.match(/:\d+/g)?"**********************":aC});ay=ay.replace(/[\uFE30-\uFFA0\u2E80-\u9FFF\u3000\uac00-\ud7ff‘“”’]/g,"**")}var aB=Math.floor((az._maxLen-ay.length)/2);var aA=aB<0?{note:"已超出",color:"#BA2636",countnum:Math.abs(aB)}:{note:"还可以输",color:"#898989",countnum:Math.abs(aB)};if(aB<0){az._isMoreLimit=true}else{az._isMoreLimit=false}az.sendInfoTipElem.attr("innerHTML",Z.util.simpleParse(l.sendInfoTip,aA))},initTextAreaHandle:function(){var ay=this;ay.textAreaElem.addEvent("keyup",ay.countTips.bind(ay));ay.textAreaElem.addEvent("focus",ay.countTips.bind(ay));ay.textAreaElem.addEvent("paste",ay.countTips.bind(ay));ay.textAreaElem.addEvent("cut",ay.countTips.bind(ay));ay.textAreaElem.addEvent("delete",ay.countTips.bind(ay));ay.textAreaElem.addEvent("keydown",function(az){var az=az||window.event;if(az.ctrlKey&&az.keyCode==13){az.preventDefault();ay.sendInfo();return}ay.countTips.call(ay)})},checkTag:function(ay){var aA=this,az=[];az=ay.match(B.reg.keyword);if(az){if(az.length==1&&(az[0]==ay)){aA.sendInfoTipElem.attr("innerHTML",'<em class="wb-article-red">再说点内容吧</em>');return false}else{if(az.length==2&&(f(ay)==az[0]+az[1])){aA.sendInfoTipElem.attr("innerHTML",'<em class="wb-article-red">再说点内容吧</em>');return false}}if(az.length>2){aA.sendInfoTipElem.attr("innerHTML",'<em class="wb-article-red">最多包括2个#话题</em>');return false}}return true},sendInfo:function(){return true},textError:function(){var az=this;for(var ay=0;ay<3;ay++){setTimeout(function(){az.textAreaElem.style.backgroundColor="#FEE9E9"},ay*300+1);setTimeout(function(){az.textAreaElem.style.backgroundColor="#FFF"},ay*300+151)}az.textAreaElem.focus()}};H.slide=function(aB){var aA=Z("#"+aB);var az=aA.scrollHeight-36;aA.addCss({height:"0px",overflow:"hidden"});var ay={height:parseFloat(az)+"px"};setTimeout(function(){aA.animate(ay,0.3,"linear",function(){aA.addCss({height:"",overflow:""})})},0)};F(H,ac);function ac(aA,ay){ac.superclass.constructor.call(this,aA,ay);var az=this;az.textAreaElem=Z(az.wrapperElem.$("textarea")[0]);az.sendBtnElem=Z(az.wrapperElem.$(".wb-article-popup-sendinfo-btn")[0]);az.sendInfoTipElem=Z(az.wrapperElem.$(".wb-article-popup-note")[0])}F(ac,t);function t(aC,az,aA,ay,aB){t.superclass.constructor.call(this,aC,az);this.targetId=aA;this.winObj=ay;this.refer=aB}t.prototype.sendInfo=function(){var az=this,ay=az.textAreaElem.value.trim();az.countTips();if(""===ay||az._isMoreLimit){az.textError();return}if(!az.checkTag(ay)){return}az.textAreaElem.blur();var aA={content:ay,targetId:az.targetId,isReplyToRoot:0,isRetweet:1,isReplyToIt:1};aA.method="reply";for(var aB in az.refer){aA[aB]=az.refer[aB]}var aC={url:B.url.wbarticleCommon,param:aA,callBack:az.callBack.bind(az)};if(az._isRequest){return}az._isRequest=true;aa(aC)};t.prototype.callBack=function(){if(typeof shareResult=="undefined"){return}var ay=this;switch(shareResult.status){case"1":ay.textAreaElem.value="";ay.sendInfoTipElem.attr("innerHTML",'<em class="wb-article-red">评论成功</em>').addCss("opacity:0");ay.sendInfoTipElem.animate({opacity:1},0.3,"linear",function(){ay.sendInfoTipElem.style.opacity=""});ay._isRequest=false;setTimeout(function(){ay.winObj.hide()},1000);break;case"-1":ay.textAreaElem.value="";ay.sendInfoTipElem.attr("innerHTML",'<em class="wb-article-red">评论失败</em>').addCss("opacity:0");ay.sendInfoTipElem.animate({opacity:1},0.3,"linear",function(){ay.sendInfoTipElem.style.opacity=""});ay._isRequest=false;break;case"-3":alert("未开通帐号");break;case"-5":alert("未登录");break;default:ay.textAreaElem.value="";ay.sendInfoTipElem.attr("innerHTML",'<em class="wb-article-red">评论失败</em>').addCss("opacity:0");ay.sendInfoTipElem.animate({opacity:1},0.3,"linear",function(){ay.sendInfoTipElem.style.opacity=""});ay._isRequest=false;break}};F(ac,Q);function Q(aC,az,aA,ay,aB){Q.superclass.constructor.call(this,aC,az);this.targetId=aA;this.winObj=ay;this.refer=aB}Q.prototype.sendInfo=function(){var az=this,ay=az.textAreaElem.value.trim();az.countTips();if(""===ay||az._isMoreLimit){az.textError();return}if(!az.checkTag(ay)){return}az.textAreaElem.blur();var aA={content:ay,targetId:az.targetId,isReplyToRoot:0,isRetweet:2,isReplyToIt:0};aA.method="retweet";for(var aB in az.refer){aA[aB]=az.refer[aB]}var aC={url:B.url.wbarticleCommon,param:aA,callBack:az.callBack.bind(az)};if(az._isRequest){return}az._isRequest=true;aa(aC)};Q.prototype.callBack=function(){if(typeof shareResult=="undefined"){return}var ay=this;switch(shareResult.status){case"1":ay.textAreaElem.value="";ay.sendInfoTipElem.attr("innerHTML",'<em class="wb-article-red">转发成功</em>').addCss("opacity:0");ay.sendInfoTipElem.animate({opacity:1},0.3,"linear",function(){ay.sendInfoTipElem.style.opacity=""});ay._isRequest=false;setTimeout(function(){ay.winObj.hide()},1000);break;case"-1":ay.textAreaElem.value="";ay.sendInfoTipElem.attr("innerHTML",'<em class="wb-article-red">转发失败</em>').addCss("opacity:0");ay.sendInfoTipElem.animate({opacity:1},0.3,"linear",function(){ay.sendInfoTipElem.style.opacity=""});ay._isRequest=false;break;case"-3":alert("开通帐号");break;case"-5":alert("未登录");break;default:ay.textAreaElem.value="";ay.sendInfoTipElem.attr("innerHTML",'<em class="wb-article-red">转发失败</em>').addCss("opacity:0");ay.sendInfoTipElem.animate({opacity:1},0.3,"linear",function(){ay.sendInfoTipElem.style.opacity=""});ay._isRequest=false;break}};F(ac,O);function O(aB,az,ay,aA){O.superclass.constructor.call(this,aB,az);this.winObj=ay;this.refer=aA}O.prototype.sendInfo=function(){var az=this,ay=az.textAreaElem.value.trim();az.countTips();if(""===ay||az._isMoreLimit){az.textError();return}if(!az.checkTag(ay)){return}az.textAreaElem.blur();var aA={content:ay};aA.method="ADD_BUTTER";for(var aB in az.refer){aA[aB]=az.refer[aB]}var aC={url:B.url.wbarticleCommon,param:aA,callBack:az.callBack.bind(az)};if(az._isRequest){return}az._isRequest=true;aa(aC)};O.prototype.callBack=function(){if(typeof shareResult=="undefined"){return}var ay=this;switch(shareResult.status){case"1":ay.textAreaElem.value="";ay.sendInfoTipElem.attr("innerHTML",'<em class="wb-article-red">发送成功</em>').addCss("opacity:0");ay.sendInfoTipElem.animate({opacity:1},0.3,"linear",function(){ay.sendInfoTipElem.style.opacity=""});ay._isRequest=false;setTimeout(function(){ay.winObj.hide()},1000);break;case"-1":ay.textAreaElem.value="";ay.sendInfoTipElem.attr("innerHTML",'<em class="wb-article-red">发送失败</em>').addCss("opacity:0");ay.sendInfoTipElem.animate({opacity:1},0.3,"linear",function(){ay.sendInfoTipElem.style.opacity=""});ay._isRequest=false;break;case"-3":alert("未开通帐号");break;case"-5":alert("未登录");break;default:ay.textAreaElem.value="";ay.sendInfoTipElem.attr("innerHTML",'<em class="wb-article-red">发送成功</em>').addCss("opacity:0");ay.sendInfoTipElem.animate({opacity:1},0.3,"linear",function(){ay.sendInfoTipElem.style.opacity=""});ay._isRequest=false;break}};F(ag,P);function P(az,ay){P.superclass.constructor.call(this,"开通微博并转发",ay);this.openAccount_miniwindow.afterAction=function(){K(az,ay)};this.openAccount_miniwindow.changeAccountAction=function(){new k(az,ay)};this.openAccount_miniwindow.show()}F(ag,R);function R(az,ay){R.superclass.constructor.call(this,"开通微博并评论",ay);this.openAccount_miniwindow.afterAction=function(){J(az,ay)};this.openAccount_miniwindow.changeAccountAction=function(){new ah(az,ay)};this.openAccount_miniwindow.show()}F(ag,N);function N(az,ay){N.superclass.constructor.call(this,"开通微博并对TA说",ay);this.openAccount_miniwindow.afterAction=function(){ao(az,ay)};this.openAccount_miniwindow.changeAccountAction=function(){new E(az,ay)};this.openAccount_miniwindow.show()}F(ag,V);function V(az,ay,aA){V.superclass.constructor.call(this,"开通微博并关注",aA);this.openAccount_miniwindow.afterAction=function(){s(az,ay,aA)};this.openAccount_miniwindow.changeAccountAction=function(){new G(az,ay,aA)};this.openAccount_miniwindow.show()}F(ag,p);function p(ay){var az={keyfrom:"no"};if(typeof ay=="object"){for(var aA in ay){az[aA]=ay[aA]}}p.superclass.constructor.call(this,"开通微博",az);this.openAccount_miniwindow.changeAccountAction=function(){new A(ay)};this.openAccount_miniwindow.show()}F(ak,G);function G(az,ay,aA){G.superclass.constructor.call(this,"登录并关注",aA);this.loginWindow.afterAction=function(){s(az,ay,aA)};this.loginWindow.loginOpenAction=function(){new V(az,ay,aA)};this.loginWindow.show()}F(ak,ah);function ah(az,ay){ah.superclass.constructor.call(this,"登录并评论",ay);this.loginWindow.afterAction=function(){J(az,ay)};this.loginWindow.loginOpenAction=function(){new R(az,ay)};this.loginWindow.show()}F(ak,k);function k(az,ay){k.superclass.constructor.call(this,"登录并转发",ay);this.loginWindow.afterAction=function(){K(az,ay)};this.loginWindow.loginOpenAction=function(){new P(az,ay)};this.loginWindow.show()}F(ak,E);function E(az,ay){E.superclass.constructor.call(this,"登录并对TA说",ay);this.loginWindow.afterAction=function(){ao(az,ay)};this.loginWindow.loginOpenAction=function(){new N(az,ay)};this.loginWindow.show()}F(ak,A);function A(ay){var az={keyfrom:"no"};if(typeof ay=="object"){for(var aA in ay){az[aA]=ay[aA]}}A.superclass.constructor.call(this,"登录微博",az);this.loginWindow.show()}function n(aA,az){var ay={btnText:"评论",width:580,boxWidth:568};var aB={title:"评论该微博",content:Z.util.parseTpl(l.sendBoxWin,ay)};this.comment_miniwin=new g("reply_miniwin","wb-article-newdialogLayer wb-article-common",Z.util.parseTpl(l.commonPopWindow,aB),600);comment_miniwin.show();new t(Z("#reply_miniwin"),"",aA,comment_miniwin,az).init()}function aw(aA,az){var ay={btnText:"转发",width:580,boxWidth:568};var aB={title:"转发到微博",content:Z.util.parseTpl(l.sendBoxWin,ay)};this.retweet_miniwin=new g("retweet_miniwin","wb-article-newdialogLayer wb-article-common",Z.util.parseTpl(l.commonPopWindow,aB),600);retweet_miniwin.show();new Q(Z("#retweet_miniwin"),"",aA,retweet_miniwin,az).init()}function e(aB,az){var ay={btnText:"发送",width:580,boxWidth:568};var aA={title:"对Ta说",content:Z.util.parseTpl(l.sendBoxWin,ay)};this.say_miniwin=new g("say_miniwin","wb-article-newdialogLayer wb-article-common",Z.util.parseTpl(l.commonPopWindow,aA),600);say_miniwin.show();new O(Z("#say_miniwin"),"@"+aB+" ",say_miniwin,az).init()}function af(az,ay,aA){aA.screenName=az;aA.method="follow";var aB={url:B.url.wbarticleFolow,param:aA,callBack:function(){if(typeof shareResult=="undefined"){return}switch(shareResult.status){case"1":Z(ay).addCss("wb-article-folowed");ay.onclick=null;break;case"-1":alert("关注失败");break;case"-3":alert("未开通微博帐号");break;case"-5":alert("未登录");break;default:alert("关注失败");break}}};aa(aB)}function s(aA,az,ay){var aB={followfrom:"no",keyfrom:"no",sitechannel:"no",method:"no"};if(typeof ay=="object"){for(var aC in ay){aB[aC]=ay[aC]}}var aD={url:B.url.wbarticleCheckStatus,param:{screenName:"163",timestamp:(new Date()).getTime()},callBack:function(){if(typeof shareResult=="undefined"){return}B.email=shareResult.email;switch(shareResult.status){case"1":af(aA,az,aB);break;case"-1":alert("发生错误，请稍后再试");break;case"-3":new V(aA,az,aB);break;case"-5":new G(aA,az,aB);break;default:break}}};aa(aD);return false}function K(aA,ay){var az={keyfrom:"no",sitechannel:"no",method:"no"};if(typeof ay=="object"){for(var aB in ay){az[aB]=ay[aB]}}var aC={url:B.url.wbarticleCheckStatus,param:{screenName:"163",timestamp:(new Date()).getTime()},callBack:function(){if(typeof shareResult=="undefined"){return}B.email=shareResult.email;switch(shareResult.status){case"1":aw(aA,az);break;case"-1":alert("发生错误，请稍后再试");break;case"-3":new P(aA,az);break;case"-5":new k(aA,az);break;default:break}}};aa(aC)}function J(aA,ay){var az={keyfrom:"no",sitechannel:"no",method:"no"};if(typeof ay=="object"){for(var aB in ay){az[aB]=ay[aB]}}var aC={url:B.url.wbarticleCheckStatus,param:{screenName:"163",timestamp:(new Date()).getTime()},callBack:function(){if(typeof shareResult=="undefined"){return}B.email=shareResult.email;switch(shareResult.status){case"1":n(aA,az);break;case"-1":alert("发生错误，请稍后再试");break;case"-3":new R(aA,az);break;case"-5":new ah(aA,az);break;default:break}}};aa(aC)}function ao(aB,ay){var az={keyfrom:"no",sitechannel:"no",method:"no"};if(typeof ay=="object"){for(var aA in ay){az[aA]=ay[aA]}}var aC={url:B.url.wbarticleCheckStatus,param:{screenName:"163",timestamp:(new Date()).getTime()},callBack:function(){if(typeof shareResult=="undefined"){return}B.email=shareResult.email;switch(shareResult.status){case"1":e(aB,az);break;case"-1":alert("发生错误，请稍后再试");break;case"-3":new N(aB,az);break;case"-5":new E(aB,az);break;default:break}}};aa(aC)}function av(aA,ay){var az={keyfrom:"no",sitechannel:"no",method:"no"};if(typeof ay=="object"){for(var aB in ay){az[aB]=ay[aB]}}var aC={url:B.url.wbarticleCheckStatus,param:{screenName:"163",timestamp:(new Date()).getTime()},callBack:function(){if(typeof shareResult=="undefined"){return}B.email=shareResult.email;switch(shareResult.status){case"1":aA(az);break;case"-1":alert("发生错误，请稍后再试");break;case"-3":new p(az);break;case"-5":new A(az);break;default:break}}};aa(aC)}var ar=new m("statusAction",["action","showAccount","showLogin"]);function w(ay){m.ensureInherit(ay,ar);var az={url:B.url.wbarticleCheckStatus,param:{screenName:"163",timestamp:(new Date()).getTime()},callBack:function(){if(typeof shareResult=="undefined"){return}B.email=shareResult.email;switch(shareResult.status){case"1":ay.action();break;case"-1":alert("发生错误，请稍后再试");break;case"-3":ay.showAccount();break;case"-5":ay.showLogin();break;default:break}}};aa(az)}function h(az,ay){var aA={url:B.url.wbarticleCommon,param:az,callBack:ay.callBack.bind(ay)};aa(aA)}function u(ay){this.options={elem:{},interval:50,speed:10};for(var az in ay){this.options[az]=ay[az]}}u.prototype.run=function(aB,az){var aA=this;var aC=aA.options.elem;aA.stop();if(!aC.style.left){aC.style.left="0px"}if(!aC.style.top){aC.style.top="0px"}var ay=parseInt(aC.style.left);var aE=parseInt(aC.style.top);if(ay==aB&&aE==az){return true}if(ay<aB){var aD=Math.ceil((aB-ay)/10);ay=ay+aD}if(ay>aB){var aD=Math.ceil((ay-aB)/10);ay=ay-aD}if(aE<az){var aD=Math.ceil((az-aE)/10);aE=aE+aD}if(aE>az){var aD=Math.ceil((aE-az)/10);aE=aE-aD}aC.style.left=ay+"px";aC.style.top=aE+"px";aC.movement=setTimeout(function(){aA.run(aB,az)},aA.options.interval)};u.prototype.uniformRun=function(aB,az){var aA=this;var aC=aA.options.elem;aA.stop();if(!aC.style.left){aC.style.left="0px"}if(!aC.style.top){aC.style.top="0px"}var ay=parseInt(aC.style.left);var aE=parseInt(aC.style.top);if(ay==aB&&aE==az){return true}var aD=aA.options.speed;if(ay<aB){ay=ay+aD}if(ay>aB){ay=ay-aD}if(aE<az){aE=aE+aD}if(aE>az){aE=aE-aD}aC.style.left=ay+"px";aC.style.top=aE+"px";aC.movement=setTimeout(function(){aA.uniformRun(aB,az)},aA.options.interval)};u.prototype.stop=function(){if(this.options.elem.movement){clearTimeout(this.options.elem.movement)}};function ai(ay){this.options={wraper:document.body,speed:10,width:100,eventType:"click",currentCursor:"js-current"};for(var aA in ay){this.options[aA]=ay[aA]}var aO=this;aO.curentIndex=1;var aG=Z(aO.options.wraper).$(".js-container").$(0);aO.c=aG;var aL=aG.parentNode,aF=Z(aO.options.wraper).$(".js-panel"),aB=Z(aO.options.wraper).$(".js-cursor"),az=Z(aO.options.wraper).$(".js-left").$(0),aN=Z(aO.options.wraper).$(".js-right").$(0),aK=aO.options.width;aO.count=aF.length;var aM=aF[0],aJ=aF[aO.count-1];var aC=document.createElement(aM.tagName);aC.className=aM.className;aC.innerHTML=aM.innerHTML;WbApi.insertBefore(aC,aM);var aH=document.createElement(aJ.tagName);aH.className=aJ.className;aH.innerHTML=aJ.innerHTML;WbApi.insertAfter(aH,aJ);if(aF.length==0){return}var aI=aF[0].offsetWidth,aD=Math.ceil(aI*aF.length/aK),aE=aB.length>0;aO.l=aD;aO.isCursor=aE;if(aE){aO.cursor=Z(aB[0]);aO.cursor.addCss(aO.options.currentCursor);aO.cursors=aB;aO.cursors&&aO.cursors.each(function(aQ,aP){(function(aR){Z(aP).addEvent(aO.options.eventType,function(){aO.pull(aR+1);aO.setCursor(this)})})(aQ)})}aO.panels=aF;aG.style.position="relative";aG.style.width="20000px";aG.style.left=-aO.options.width+"px";aL.style.width=aK+"px";aL.style.overflow="hidden";aL.style.position="relative";aO.move=new WbApi.Move({elem:aG,interval:5,speed:aO.options.speed});az&&az.addEvent(this.options.eventType,function(){aO.curentIndex--;if(aO.curentIndex==0){aO.curentIndex=aO.l;aG.style.left=-(aO.l+1)*aO.options.width+"px"}aO.setIndex(aO.isCursor);aO.pull(aO.curentIndex)});aN&&aN.addEvent(this.options.eventType,function(){aO.curentIndex++;if(aO.curentIndex==aO.l+1){aO.curentIndex=1;aG.style.left=0}aO.setIndex(aO.isCursor);aO.pull(aO.curentIndex)})}ai.prototype.setCursor=function(az){var ay=this;ay.cursor.removeCss(ay.options.currentCursor);ay.cursor=Z(az);ay.cursor.addCss(ay.options.currentCursor)};ai.prototype.pull=function(ay){var az=this;az.move.run(-ay*az.options.width);az.curentIndex=ay};ai.prototype.setIndex=function(az){var ay=this,aA;if(ay.curentIndex==ay.l+1){ay.curentIndex=1}if(ay.curentIndex==0){ay.curentIndex=ay.l}az&&ay.setCursor(ay.cursors[ay.curentIndex-1])};window.WbApp={};WbApp.extend=F;WbApp.ArticleSendBox=H;WbApp.CommonLoginWin=A;WbApp.CommonAccountWin=p;WbApp.checkStatus=av;WbApp.sendContent=h;WbApp.loginWin=ak;WbApp.accountWin=ag;WbApp.checkUserStatus=w;WbApp.InterFace=m;WbApp.PagerView=am;WbApp.crossDomainRequest=aa;WbApp.doAudit=ae;WbApp.cutString=M;WbApp.crossjsDomainRequest=al;WbApp.simpleParse=Z.util.simpleParse;WbApp.stripHash=X;WbApp.WbFollow=s;WbApp.WbRetweet=K;WbApp.WbComment=J;WbApp.WbSay=ao;l.shareWindow='<iframe id="wb-article-frame" scrolling="no" frameborder="0" width="<#=width#>" height="<#=height#>" src="<#=src#>"></iframe>';l.shareTips='<a class="wb-article-sharelink" id="<#=linkId#>" target="_self" href="javascript:void(0);"><em></em>转发到微博</a><a href="javascript:;" class="wb-article-sharenum" hidefocus="true" id="<#=numId#>" rel="nofollow"></a><div class="wb-article-sharetipswraper">   <span id="<#=tipsId#>" class="wb-article-sharetips">      <span class="wb-article-sharearrow"></span>   </span></div>';l.shareTipsSm='<a class="wb-article-sharelink" id="<#=linkId#>" target="_self" href="javascript:void(0);"><em></em>转发到微博</a><a href="javascript:;" hidefocus="true" class="wb-article-sharenum" id="<#=numId#>"></a><span class="wb-photo-share-inner">   (<span id="<#=photonumId#>" class="wb-photo-sharenum"></span>)</span>';function z(aA){var ay={template:"",width:400,title:"提示"};for(var aB in aA){ay[aB]=aA[aB]}var aB={title:ay.title,content:ay.template};var az=new g("wb-article-showPopWindow","wb-article-newdialogLayer wb-article-common",Z.util.parseTpl(l.commonPopWindow,aB),ay.width+20);az.show();return az}function U(aB,az,aD){var ay={height:az,src:B.url.wbarticleShare+"?"+aD,width:aB};var aC={title:"转发到网易微博",content:Z.util.parseTpl(l.shareWindow,ay)};var aA=new g("wb-article-showPopWindow","wb-article-newdialogLayer wb-article-common",Z.util.parseTpl(l.commonPopWindow,aC),aB+20);aA.show();B.currentWindow=aA}var D=false;function r(aA){if(D){return}var az={source:"",link:""};for(var aB in aA){az[aB]=aA[aB]}if(typeof az.images!="undefined"){az.images=L(az.images)?az.images():az.images}if(az.link!="undefined"){az.link=L(az.link)?az.link():az.link}var ay=decodeURIComponent(W(az));var aC={url:B.url.wbarticleCheckStatus,param:{screenName:"163",timestamp:(new Date()).getTime()},callBack:function(){if(typeof shareResult=="undefined"){return}D=false;B.email=shareResult.email;switch(shareResult.status){case"1":U(543,226,ay);break;case"-1":alert("发生错误，请稍后再试");break;case"-3":U(543,510,ay);break;case"-5":U(543,510,ay);break;default:break}}};D=true;aa(aC)}function T(ay){if(!Z("#wb-article-frame")){return}Z("#wb-article-frame").style.height=ay+"px"}function aj(){if(B.currentWindow!=""){B.currentWindow.hide()}}function ab(){if(Z(".wb-article-sharenum").length==0){return}Z(".wb-article-sharenum").each(function(az,ay){var aA=parseInt(ay.innerHTML);ay.innerHTML=aA+1})}function I(aB,aA){document.domain="163.com";var az=X();var aC=az.match("[0-9a-zA-Z]+.([0-9a-zA-Z]+.)*([0-9a-zA-Z]+)/[0-9a-zA-Z/_]+[0-9a-zA-Z_]+")[0];var ay="http://static.t.126.net/share/newshare/"+aC+".js";var aD={url:ay,callBack:function(){var aJ=window.twitteData;if(typeof aJ!="undefined"){if(!Z("#"+aA)){return}var aF={linkId:"wb-article-sharelink",numId:"page_tweet_count",tipsId:"tweet_page_name"};Z("#"+aA).addCss("wb-article-sm-container");Z("#"+aA).innerHTML=Z.util.parseTpl(l.shareTips,aF);Z("#wb-article-sharelink").addEvent("click",function(){r(aB);return false});Z("#page_tweet_count").innerHTML=aJ.retweetcount;Z("#page_tweet_count").href=aJ.tweetLink+"?method=click&keyfrom=shareNum";var aK;var aM;if(aJ.retweetcount==0){var aO=document.createTextNode("快来率先转发！");aK=document.createElement("div");aK.className="wb-article-sharetipswraper-darkrow";aK.appendChild(aO);aM=document.createElement("span");Z("#page_tweet_count").href="javascript:;";Z("#page_tweet_count").attr("target","_self");Z("#page_tweet_count").addCss("wb-article-sharenum-cursor")}else{if(aJ.retweetcount==1){var aN=document.createTextNode("转发就能留名！");aK=document.createElement("div");aK.className="wb-article-sharetipswraper-lightrow";aK.appendChild(aN);var aG=document.createElement("a");aG.innerHTML=M(aJ.firstUser,0,3);aG.href=aJ.firstUserUrl+"?method=click&keyfrom=share163.find.click";aG.setAttribute("rel","nofollow");aG.title=aJ.firstUser;aG.target="_blank";var aE=document.createTextNode(" 率先转发");aM=document.createElement("div");aM.className="wb-article-sharetipswraper-darkrow";aM.appendChild(aG);aM.appendChild(aE)}else{var aI=document.createElement("a");aI.innerHTML=M(aJ.lastUser,0,3);aI.href=aJ.lastUserUrl+"?method=click&keyfrom=share163.gang.click";aI.setAttribute("rel","nofollow");aI.title=aJ.lastUser;aI.style.textDecoration="none";aI.target="_blank";var aH=document.createTextNode(" 刚刚转发");aK=document.createElement("div");aK.className="wb-article-sharetipswraper-lightrow";aK.appendChild(aI);aK.appendChild(aH);var aG=document.createElement("a");aG.innerHTML=M(aJ.firstUser,0,3);aG.href=aJ.firstUserUrl+"?method=click&keyfrom=share163.find.click";aG.setAttribute("rel","nofollow");aG.title=aJ.firstUser;aG.style.textDecoration="none";aG.target="_blank";var aE=document.createTextNode(" 率先转发");aM=document.createElement("div");aM.className="wb-article-sharetipswraper-darkrow";aM.appendChild(aG);aM.appendChild(aE)}}var aL=document.getElementById("tweet_page_name");aL.appendChild(aK);aL.appendChild(aM)}}};al(aD)}function au(aB,aA){document.domain="163.com";var az=X();var aC=az.match("[0-9a-zA-Z]+.([0-9a-zA-Z]+.)*([0-9a-zA-Z]+)/[0-9a-zA-Z/_]+[0-9a-zA-Z_]+")[0];var ay="http://static.t.126.net/share/newshare/"+aC+".js";var aD={url:ay,callBack:function(){var aE=window.twitteData;if(typeof aE!="undefined"){if(!Z("#"+aA)){return}var aF={linkId:"wb-article-sharelink-sm",numId:"page_tweet_count-sm",photonumId:"photo_page_tweet_count-sm"};Z("#"+aA).addEvent("click",function(){r(aB);return false});Z("#"+aA).$(".count")[0].innerHTML=aE.retweetcount}}};al(aD)}WbApp.resizeHeight=T;WbApp.closeShareWindow=aj;WbApp.addShareCount=ab;WbApp.showPopWindow=r;WbApp.showCustomWindow=z;function at(aG,aD,aI,aQ){if(parseInt(aD)>100){return}if(!Z("#"+aG)){return}var aN={},ay={};l.followIcon='   <div class="wb-article-star-list-one">      <div class="wb-article-star-list-photo">            <a href="http://t.163.com/<#=screenName#>?method=click&keyfrom=op.wz.gfo.name" title="<#=name#>" target="_blank" rel="nofollow">                 <img alt="<#=name#>" src="<#=profileImage#>" class="wb-article-thumb" />            </a>      </div>      <div class="wb-article-star-list-name">            <input type="checkbox" checked="checked" value="<#=screenName#>" id="<#=screenName#>" /><label title="<#=nameD#>" for="<#=screenName#>"><#=name#></label>      </div>      <div class="wb-article-star-list-intro" title="<#=introductionD#>">            <span><#=introduction#></span>      </div>   </div> ';l.followWraper='   <div class="wb-article-followSelected-wraper wb-article-common" style="border: 1px solid #ccc;">     <div class="wb-article-followSelected-bar"><div class="wb-article-followSelected-logo"><a href="http://t.163.com/?method=click&keyfrom=op.wz.gfo.towb" rel="nofollow" target="_blank"><em></em>网易微博</a></div> </div>     <div id="wbnewsWraper"></div>     <div class="wb-article-followSelected-title">            <span class="wb-article-followSelected-icon">达人推荐</span> <span id="pagerWraper"></span>     </div>     <div class="wb-article-followSelected-wraper-list wb-article-clearfix" id="followWraper">     </div>     <div class="wb-article-followSelected-wraper-follow">            <div class="wb-article-folloSelected-btnWraper">                    <a href="javascript:;" target="_self" class="wb-article-btnbg wb-article-commonbtn" id="followBtn"><em class="wb-article-btnbg">批量关注</em></a>                    <a href="javascript:;" target="_self" class="wb-article-btnbg wb-article-commonbtn wb-article-disabledbtn" id="followdoneBtn" style="display:none;"><em class="wb-article-btnbg">关注成功</em></a>                    <a href="http://t.163.com/?method=click&keyfrom=op.wz.gfo.towb" rel="nofollow" class="wb-article-enter" id="wbenterbtn">进入网易微博</a>                    <span class="wb-article-enter wb-article-tips" id="wberrortips" style="display:none">请勾选要关注的人</span>            </div>     </div>   </div>';l.newsWraper='   <div class="wb-article-followSelected-news">     <ul class="wb-article-followSelected-headline">         <#=headlines#>     </ul>     <ul class="wb-article-followSelected-article wb-article-followSelected-left">         <#=leftnews#>     </ul>     <ul class="wb-article-followSelected-article wb-article-followSelected-right">         <#=rightnews#>     </ul>   </div>';F(ag,aF);function aF(aU,aS,aT){aF.superclass.constructor.call(this,"开通微博并关注",aT);this.openAccount_miniwindow.afterAction=function(){aE(aU,aS,aT)};this.openAccount_miniwindow.changeAccountAction=function(){new aL(aU,aS,aT)};this.openAccount_miniwindow.show()}F(ak,aL);function aL(aU,aS,aT){aL.superclass.constructor.call(this,"登录并关注",aT);this.loginWindow.afterAction=function(){aE(aU,aS,aT)};this.loginWindow.loginOpenAction=function(){new aF(aU,aS,aT)};this.loginWindow.show()}function aH(aV,aS,aT){aT.screenName=aV;aT.method="follow";var aU={url:B.url.wbarticleFolow,param:aT,callBack:function(){if(typeof shareResult=="undefined"){return}switch(shareResult.status){case"1":aN.followbtn.style.display="none";aN.followdonebtn.style.display="inline-block";aN.timer=setTimeout(function(){if(aN.index==aN.totalPage){aN.index=1;return}else{aN.index++}aN.followbtn.style.display="inline-block";aN.followdonebtn.style.display="none";aN.pager._onclick(aN.index)},2000);break;case"-1":alert("关注失败");break;case"-3":alert("未开通微博帐号");break;case"-5":alert("未登录");break;default:alert("关注失败");break}}};if(aV==""){aN.enter.style.display="none";aN.error.style.display="inline";setTimeout(function(){aN.enter.style.display="inline";aN.error.style.display="none"},1000);return}aa(aU)}function aA(aS){if(aS){aN.followbtn.style.display="none";aN.followdonebtn.style.display="inline-block"}else{aN.followbtn.style.display="inline-block";aN.followdonebtn.style.display="none"}}function aE(aX,aT,aS){var aU={followfrom:"no",keyfrom:"no",sitechannel:"no"};if(typeof aS=="object"){for(var aV in aS){aU[aV]=aS[aV]}}var aW={url:B.url.wbarticleCheckStatus,param:{screenName:"163",timestamp:(new Date()).getTime()},callBack:function(){if(typeof shareResult=="undefined"){return}B.email=shareResult.email;switch(shareResult.status){case"1":aH(aX,aT,aU);break;case"-1":alert("发生错误，请稍后再试");break;case"-3":new aF(aX,aT,aU);break;case"-5":new aL(aX,aT,aU);break;default:break}}};aa(aW)}F(am,aC);function aC(aS){aC.superclass.constructor.call(this,aS)}aC.prototype.render=function(aS){this.wraperId=aS;this.container=aS;this._calculate();var aT="";if(this.options.pageCount>1){if(this.options.index!=this.options.pageCount){aT+='<a class="wb-article-followSelected-change" hideFocus="true"  href="javascript://'+(this.options.index+1)+'" target="_self">换些看看</a>'}else{aT+='<a class="wb-article-followSelected-change" hideFocus="true" href="javascript://1" target="_self" >换些看看</a>'}}this.container.innerHTML=aT;this.bind()};function az(aV){if(aV.length==0){return""}var aU=[];for(var aT=0;aT<aV.length;aT++){var aS={screenName:aV[aT].screenName,name:M(aV[aT].title,0,5),nameD:aV[aT].title,profileImage:Z.util.parseTpl(B.url.wbarticleOimage,{width:54,height:54,url:encodeURIComponent(aV[aT].profileImage)}),introduction:M(aV[aT].introduction,0,6),introductionD:aV[aT].introduction};aU.push(Z.util.parseTpl(l.followIcon,aS));ay[aV[aT].screenName]="163"}return aU}function aP(aV){var aT=aV.recommendTopArticle,aZ=aV.recommendArticle;if(aT.length==0&&aZ.length==0){return[]}var aX=[],aS=[],aY=[];for(var aW=0;aW<aT.length;aW++){if(aW<2){var a0="nosub";if(aW==1){a0="newssub"}var a1='<li class="'+a0+'" title="'+aT[aW].title+'">'+M(aT[aW].title,0,16)+"</li>";if(aT[aW].url&&aT[aW].url!=""){a1='<li class="'+a0+'"><a href="'+aT[aW].url+'" rel="nofollow" target="_blank" title="'+aT[aW].title+'">'+M(aT[aW].title,0,16)+"</a></li>"}aX.push(a1)}}for(var aW=0;aW<aZ.length;aW++){if(aW<8){var aU='<li  title="'+aZ[aW].title+'">'+M(aZ[aW].title,0,16)+"</li>";if(aZ[aW].url&&aZ[aW].url!=""){aU='<li><a href="'+aZ[aW].url+'" rel="nofollow" target="_blank" title="'+aZ[aW].title+'">'+M(aZ[aW].title,0,16)+"</a></li>"}if(aW<4){aS.push(aU)}else{aY.push(aU)}}}return[aX.join(""),aS.join(""),aY.join("")]}var aM=6;if(typeof aI=="number"){aM=aI}function aJ(aS){aN.pager=new aC({itemCount:aS.length,size:aM,maxButtons:0});aN.pager.staticDataCollection=aS;aN.pager.onclick=function(aT){aN.timer&&clearTimeout(aN.timer);var aU=this.getStaticData(aT);aN.darenWraper.innerHTML=aU.join("");aN.darenWraper.$("input").each(function(aW,aV){if(!ay[aV.value]){aV.checked=false}});aN.index=aT;if(aN[aN.index.toString()]){aA(true);return}aA(false)};aN.pager.render(aN.pagerWraper);aN.pager.onclick(1);aN.totalPage=Math.ceil(aS.length/aM)}var aO={method:"follow",followfrom:"op.wz.gfo",keyfrom:"op.wz.gfo",sitechannel:"no"};if(typeof aQ=="object"){for(var aK in aQ){aO[aK]=aQ[aK]}}Z("#"+aG).innerHTML=l.followWraper;aN.enter=Z("#wbenterbtn");aN.error=Z("#wberrortips");aN.pagerWraper=Z("#pagerWraper");aN.darenWraper=Z("#followWraper");aN.followbtn=Z("#followBtn");aN.followdonebtn=Z("#followdoneBtn");aN.newsWraper=Z("#wbnewsWraper");var aB={url:Z.util.parseTpl(B.url.wbarticleNewsList,{channelId:aD}),callBack:function(){if(typeof articleLinkList=="undefined"){return}var aS=aP(articleLinkList);if(aS.length==0){return}aN.newsWraper.innerHTML=Z.util.parseTpl(l.newsWraper,{headlines:aS[0],leftnews:aS[1],rightnews:aS[2]});aN.newsWraper.addEvent("click",function(aU){var aT=aU.target||aU.srcElement;switch(aT.tagName.toLowerCase()){case"a":ae({method:"click",keyfrom:aO.keyfrom+".link"});break;default:break}})}};al(aB);var aR={url:Z.util.parseTpl(B.url.wbarticleStarList,{channelId:aD}),callBack:function(){if(typeof recommendList=="undefined"){return}var aS=az(recommendList);new aJ(aS);aN.darenWraper.addEvent("click",function(aU){var aT=aU.target||aU.srcElement;switch(aT.tagName.toLowerCase()){case"input":aT.checked?ay[aT.value]="163":ay[aT.value]=null;aN[aN.index.toString()]=null;aA(false);break;default:break}});aN.followbtn.onclick=function(){var aT=[];aN.darenWraper.$("input").each(function(aV,aU){if(aU.checked){aT.push(aU.value)}});aE(aT.join(","),this,aO);if(aT.length==0){return}aN[aN.index.toString()]="163";return false}}};al(aR)}WbApp.createFollowSelectedHtml=at;function an(aE,aC,ay){if(parseInt(aC)>100){return}var aA={"0001":"新闻频道","0026":"女人频道","0025":"财经频道","0011":"手机频道","0005":"体育频道","0016":"数码频道","0006":"旅游频道","0029":"教育频道","0031":"游戏频道","0087":"房产频道"};if(aA[aC]){aC=aC}else{aC="0004"}if(!Z("#"+aE)){return}var aB={},aD={};l.wbRecoInfo='<li class="wb-reco-liItem">      <div class="wb-reco-status">         <span class="wb-reco-status-author">            <a title="<#=nickName#>" href="http://t.163.com/<#=screenName#>?f=link.tdaren" target="_blank"><img class="wb-reco-thumb" alt="<#=nickName#>" src="<#=profileImage#>"></a>         </span>         <p class="wb-reco-status-text">            <a class="link-la" target="_blank" href="http://t.163.com/<#=screenName#>?f=link.tdaren" title="<#=nickName#>"><#=nickName#></a><#if(isDaren==true){#><a class="wb-reco-iTag" href="http://t.163.com/rank/daren?f=icon.tdaren" target=_blank></a><#}#>：<span><#=text#></span>            <span class="wb-reco-status-actions link-lb"><a title="详细" hidefocus="true" href="<#=tweetUrl#>?f=re.tdaren" target="_blank">详细</a></span>         </p>      </div>   </li>';function az(aK,aL,aH){if(aK.length==0){return""}var aL=aL||0,aH=aH||aK.length,aJ=[];for(var aI=aL;aI<aH;aI++){var aG={screenName:aK[aI].screenName,nickName:aK[aI].nickName,profileImage:Z.util.parseTpl(B.url.wbarticleOimage,{width:50,height:50,url:encodeURIComponent(aK[aI].profileImage)}),text:aK[aI].digest.length>23?M(aK[aI].digest,0,23)+"...":aK[aI].digest,retweetCount:aK[aI].retweetCount,tweetUrl:aK[aI].tweetUrl,isDaren:aK[aI].isDaren};aJ.push(Z.util.parseTpl(l.wbRecoInfo,aG))}return aJ.join("")}var aF={url:Z.util.parseTpl(B.url.wbarticleRecoList,{channelId:aC}),callBack:function(){if(typeof articleTweetList=="undefined"){return}var aG=articleTweetList.length;if(aG>2){Z("#"+aE).$("ul")[0].innerHTML=az(articleTweetList,0,2);Z("#"+aE).$("ul")[1].innerHTML=az(articleTweetList,2,4);Z("#"+aE).$("ul")[2].innerHTML=az(articleTweetList,4,aG)}else{Z("#"+aE).$("ul")[0].innerHTML=az(articleTweetList,0,aG)}if(Z("#wbRecoWrapper")){new WbApi.Slide({wraper:Z("#wbRecoWrapper"),speed:10,width:300,currentCursor:"cur",eventType:"click"})}}};al(aF)}window.WbApi={};WbApi.insertBefore=ap;WbApi.insertAfter=C;WbApi.Move=u;WbApi.Slide=ai;WbApi.createRecoHtml=an;WbApi.initShareTips=I;WbApi.initShareTipsSm=au;Z.ready(function(){var ay=document.createElement("div");document.body.insertBefore(ay,document.body.firstChild);B.shade=new ax(ay)})})(NTES);